<head>
	<script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.8.0.js"></script>
	<link rel="stylesheet" href="screen.css">
	<link rel="stylesheet" href="shared.css">
	<link href="https://fonts.googleapis.com/css?family=Oswald|Roboto" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@600&display=swap" rel="stylesheet">

	<script type="text/javascript">

		// whether or not to display all information
		const DEBUG = true;

		// scroll the result areas or not
		document.scroll_results = false;

		// variable to store the library in after an initial query
		var library;

		// relative to the sound effects
		document.musicVolume = 0.4;

		// store amount of correct full guesses
		document.amount_of_finished_players = 0;

		document.round = 0;
		// the setting that is used to count downwards. could potentially be modified by settings
		document.RoundTimeSetting = 30;
		document.RoundTime = document.RoundTimeSetting;
		document.defaultMaxRound = 15;
		document.maxRound = document.defaultMaxRound;
		document.OfflinePause;
		document.offlinePauseOffset;

		// store current scores of players
		document.playerScores = [];

		document.inactiveClients = 0;

		document.game_in_progress = false;
		document.ad_showing = false;
		document.showing_credits = false;
		document.game_over_screen = false;
		document.playerFailed = false;
		document.musicFailed = false;
		document.paused = false;

		document.low_performance = false;

		document.roundEndInitiated = false;

		document.selectedPlaylist;

		document.screen = "main-menu";
		document.menu = "new-game";
		document.default = true;
		document.setting = "round_amount";
		document.guessing_type = "guessing-both";

		document.hero = false;

		var specific_options_dialogue = "Choose the Setting you want to change or hit start to play with the current settings.";


		var playlists = [
            {
                name: "2000's",
                id: "11",
                description: "The best and the worst decade",
                new: "0",
                hero: "1",
                amount_of_tracks: 317,
                album_art: [
                    "https://is3-ssl.mzstatic.com/image/thumb/Music3/v4/3b/95/81/3b95816b-36c0-e47c-fa14-bd17dc6fc2c9/Livin_On_A_Prayer.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music115/v4/b4/13/e9/b413e91d-40aa-a1a8-b8e3-2bacc3b3e222/00606949329020.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/22/cd/a1/22cda1b6-77d0-00cf-7244-ef1672899547/artwork.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music125/v4/8b/77/0b/8b770b4d-ef1f-561b-5d1b-30bfb85ffb11/00606949084523.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "2010's",
                id: "26",
                description: "Music from 2010-2019",
                new: "0",
                hero: "0",
                amount_of_tracks: 196,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Features124/v4/30/aa/b0/30aab09c-bfb5-a680-adc6-e681971b199c/dj.wbithhkz.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music/14/0b/8e/mzi.vsvfenht.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music/3e/c6/46/mzi.xeajbekq.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music4/v4/47/9c/0c/479c0c1a-3f8f-f45b-c48a-9199827225b5/886444210614.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "70's",
                id: "9",
                description: "Rock'n Roll & Funk is born",
                new: "0",
                hero: "0",
                amount_of_tracks: 145,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Music114/v4/bb/31/2e/bb312e9f-9a97-a814-c746-d4a49c61d921/00042283017825.rgb.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/09/95/b3/0995b3e6-1dfd-7eed-e4fc-3ec7594c8fde/06UMGIM10542.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/14/31/d5/1431d50a-f822-dbd2-b7aa-7332a1fbd746/06UMGIM10580.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music118/v4/6b/cc/7a/6bcc7af6-c4df-095c-fd47-c634d1c97879/00602517451810.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "80's",
                id: "10",
                description: "The age of MTV",
                new: "0",
                hero: "0",
                amount_of_tracks: 148,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music114/v4/1f/ab/23/1fab2319-b4c3-816f-fbfa-a9bb7ea26d03/cover.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music112/v4/5f/16/eb/5f16eb99-3574-faef-b0a8-4f35cc2d658f/07UMGIM01593.rgb.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/f3/e2/c7/f3e2c77f-86c5-7b0a-2303-831999e068e1/884977602111.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music115/v4/48/88/82/48888281-17b1-4fd5-9573-95eb2acb0b9d/06UMGIM07185.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "90's",
                id: "2",
                description: "Eurodance, Teen Pop, Hip-Hop and Bravo Hits",
                new: "0",
                hero: "1",
                amount_of_tracks: 222,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music128/v4/d8/d5/80/d8d58018-7e78-542f-6032-a80da080e716/00008811069926.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music114/v4/77/57/ba/7757ba77-0163-a195-950b-95786aa7a90e/17UMGIM98492.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/92/a3/28/92a32865-96f4-c32a-b95e-4215667bbfc2/00008811310325.rgb.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/b8/df/d6/b8dfd62b-2c13-ddb5-5dd8-0be983460624/06UMGIM10732.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Ballads",
                id: "23",
                description: "To move your heart",
                new: "0",
                hero: "1",
                amount_of_tracks: 114,
                album_art: [
                    "https://is3-ssl.mzstatic.com/image/thumb/Music112/v4/b0/f7/5d/b0f75dab-7e01-d4c6-61c3-e6253a2cae22/06UMGIM18645.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music125/v4/0d/c0/a3/0dc0a301-d9e5-2980-5141-d8ddb1571398/00602498607497.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/66/63/2e/66632e8a-2cb9-9007-4e91-ea29216d867d/00044006321721.rgb.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music/y2005/m01/d20/h14/s05.bkornbke.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Christmas",
                id: "60",
                description: "All the classics",
                new: "0",
                hero: "0",
                amount_of_tracks: 117,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music124/v4/d9/84/16/d98416a4-d960-4602-8f2c-4f03165d434d/mzi.hohpjzfa.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music/fc/91/b9/mzi.ntawvhlc.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music125/v4/cf/a7/f8/cfa7f807-e9a6-758d-97e0-f1cd843b5a20/mzi.vcbwvmqu.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music114/v4/eb/4a/f9/eb4af984-fc68-56ab-7b89-1d070c04e1dd/5099765318524.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Dance Music",
                id: "3",
                description: "Electronic Dance Music, mostly Trance",
                new: "0",
                hero: "0",
                amount_of_tracks: 288,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Music114/v4/77/57/ba/7757ba77-0163-a195-950b-95786aa7a90e/17UMGIM98492.rgb.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music3/v4/3b/95/81/3b95816b-36c0-e47c-fa14-bd17dc6fc2c9/Livin_On_A_Prayer.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music124/v4/62/a8/9f/62a89f81-d759-1322-e419-2a920b3297b4/859731101155_cover.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music/y2004/m06/d10/h06/s05.rebsmxll.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Deutschland",
                id: "7",
                description: "Songs in german or from Germany",
                new: "0",
                hero: "0",
                amount_of_tracks: 166,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music4/v4/b5/ad/ee/b5adee0b-cc1c-3f13-67f8-2a710e2276fb/886443290587.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Features/c5/84/60/dj.hntfjoqs.tif/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music/y2004/m06/d10/h06/s05.rebsmxll.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music112/v4/98/51/35/98513533-d5b1-eec8-5d8d-af385a25c323/196589597786.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Female Artists",
                id: "35",
                description: "Female artists & collaborations",
                new: "0",
                hero: "0",
                amount_of_tracks: 419,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Music114/v4/77/57/ba/7757ba77-0163-a195-950b-95786aa7a90e/17UMGIM98492.rgb.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/f3/e2/c7/f3e2c77f-86c5-7b0a-2303-831999e068e1/884977602111.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music/cd/8b/9a/mzi.kimlabhg.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music124/v4/5d/b7/1c/5db71c9c-5322-0846-fa66-b73892422077/00731454979924.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "freakpants' list of disaster",
                id: "0",
                description: "A list of musics enjoyed by the creator of MusicGuess",
                new: "0",
                hero: "0",
                amount_of_tracks: 649,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music128/v4/d8/d5/80/d8d58018-7e78-542f-6032-a80da080e716/00008811069926.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/92/a3/28/92a32865-96f4-c32a-b95e-4215667bbfc2/00008811310325.rgb.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music3/v4/3b/95/81/3b95816b-36c0-e47c-fa14-bd17dc6fc2c9/Livin_On_A_Prayer.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/b8/df/d6/b8dfd62b-2c13-ddb5-5dd8-0be983460624/06UMGIM10732.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Global Hits 2021",
                id: "15",
                description: "The most successful global hits of 2021",
                new: "0",
                hero: "0",
                amount_of_tracks: 117,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/5d/66/e1/5d66e1ad-0c6c-1963-5ec4-676fb5c0468d/024543980063_cover.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music115/v4/2b/c4/c9/2bc4c9d4-3bc6-ab13-3f71-df0b89b173de/886448022213.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music113/v4/4f/7a/b2/4f7ab2d1-7a23-8133-f5bd-773488e371b9/886448106043.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/bb/35/39/bb353980-b0c7-eac5-9509-267feb48d1b3/21UMGIM33221.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Global Hits All Time",
                id: "43",
                description: "The most successful global hits of all time, from 1950 to today",
                new: "0",
                hero: "1",
                amount_of_tracks: 429,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Music114/v4/77/57/ba/7757ba77-0163-a195-950b-95786aa7a90e/17UMGIM98492.rgb.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/f3/e2/c7/f3e2c77f-86c5-7b0a-2303-831999e068e1/884977602111.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music115/v4/b4/13/e9/b413e91d-40aa-a1a8-b8e3-2bacc3b3e222/00606949329020.rgb.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music4/v4/b5/ad/ee/b5adee0b-cc1c-3f13-67f8-2a710e2276fb/886443290587.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Hip-Hop/Rap",
                id: "21",
                description: "From grand master funk to Drake",
                new: "0",
                hero: "0",
                amount_of_tracks: 142,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Music115/v4/b4/13/e9/b413e91d-40aa-a1a8-b8e3-2bacc3b3e222/00606949329020.rgb.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music112/v4/ff/18/82/ff18824b-2630-2ea3-9977-32f655b20602/06UMGIM15261.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music1/v4/d2/39/da/d239dac6-df7a-fe73-5e7d-6e9e2724e57b/dj.kjblpccs.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music126/v4/f6/fb/31/f6fb3104-cded-a755-53c9-be0a5527b5bc/659783313694_cover.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Latin",
                id: "22",
                description: "Songs in spanish, or from latin artists",
                new: "0",
                hero: "1",
                amount_of_tracks: 144,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music/y2005/m09/d13/h23/mzi.izmkxvgc.tif/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music/05/c5/44/mzi.vfgdwrvs.tif/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Features4/v4/36/b5/2b/36b52b96-328a-5860-c13d-b0667af1eab7/dj.ywytqpyg.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music/29/ab/24/mzi.nvoslxzs.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Pop Music",
                id: "1",
                description: "Music that a lot of people like",
                new: "0",
                hero: "1",
                amount_of_tracks: 685,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music128/v4/d8/d5/80/d8d58018-7e78-542f-6032-a80da080e716/00008811069926.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/92/a3/28/92a32865-96f4-c32a-b95e-4215667bbfc2/00008811310325.rgb.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music3/v4/3b/95/81/3b95816b-36c0-e47c-fa14-bd17dc6fc2c9/Livin_On_A_Prayer.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/b8/df/d6/b8dfd62b-2c13-ddb5-5dd8-0be983460624/06UMGIM10732.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Pop/Alternative Rock",
                id: "24",
                description: "Poprock and indie stuff",
                new: "0",
                hero: "0",
                amount_of_tracks: 214,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music128/v4/d8/d5/80/d8d58018-7e78-542f-6032-a80da080e716/00008811069926.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/92/a3/28/92a32865-96f4-c32a-b95e-4215667bbfc2/00008811310325.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/22/cd/a1/22cda1b6-77d0-00cf-7244-ef1672899547/artwork.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music118/v4/6b/cc/7a/6bcc7af6-c4df-095c-fd47-c634d1c97879/00602517451810.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Rock & Metal",
                id: "5",
                description: "Mostly of the softer percussion though",
                new: "0",
                hero: "0",
                amount_of_tracks: 100,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/92/a3/28/92a32865-96f4-c32a-b95e-4215667bbfc2/00008811310325.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/22/cd/a1/22cda1b6-77d0-00cf-7244-ef1672899547/artwork.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music114/v4/41/22/ab/4122ab9a-ad42-b89a-6457-a71df8117840/00602577027062.rgb.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music124/v4/89/fe/2d/89fe2d04-f3d7-e1f9-eb1f-23fb08756e84/17UM1IM23523.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Spain's Most Wanted December 2021",
                id: "61",
                description: "Songs that people in Spain shazamed the most",
                new: "0",
                hero: "1",
                amount_of_tracks: 188,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music/y2005/m09/d13/h23/mzi.izmkxvgc.tif/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music/y2005/m08/d09/h06/mzi.lyanjoww.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music/05/c5/44/mzi.vfgdwrvs.tif/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Features4/v4/36/b5/2b/36b52b96-328a-5860-c13d-b0667af1eab7/dj.ywytqpyg.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Swiss",
                id: "12",
                description: "Songs from Switzerland, mostly in swiss german",
                new: "0",
                hero: "0",
                amount_of_tracks: 103,
                album_art: [
                    "https://is4-ssl.mzstatic.com/image/thumb/Music125/v4/bf/dc/80/bfdc80ad-1671-9ba3-db77-120ad5b2dcbe/21UMGIM50821.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music115/v4/1e/91/ce/1e91cea7-d70c-9257-c759-ff0a9d67a130/cover_4062851639538.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music123/v4/3c/7f/0a/3c7f0a88-de27-8db0-ed54-4e582428886d/00044006671727.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music113/v4/c5/f4/6c/c5f46c0f-8fbf-5695-9498-0794f6b32fd1/cover.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Today's Top 50",
                id: "63",
                description: "The 50 most popular tracks today!",
                new: "1",
                hero: "1",
                amount_of_tracks: 50,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music114/v4/fb/bf/6d/fbbf6d06-9a6c-9c49-c313-aed403613252/075679900180.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music125/v4/9c/b0/6b/9cb06b1e-1fd4-df2e-b937-21b8b16b497e/20UMGIM13326.rgb.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music115/v4/da/8b/77/da8b7731-6f4f-eacf-5e74-8b23389eefa1/20UMGIM03371.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/8d/84/4c/8d844ca5-e42d-e01c-670e-9ed633aabb67/21UM1IM45433.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Trance",
                id: "4",
                description: "Beats & vocals",
                new: "0",
                hero: "0",
                amount_of_tracks: 102,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/f4/25/fa/f425faf4-d25d-9ebd-9e5c-c0ff9fced48d/00731453723726.rgb.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music/y2004/m06/d10/h06/s05.rebsmxll.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music124/v4/07/5e/3a/075e3a54-1177-af92-cefe-ee770626dc2e/8718522326899.png/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music/64/1e/f0/mzi.vglugasn.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "UK",
                id: "42",
                description: "Artists from the Kingdom",
                new: "0",
                hero: "0",
                amount_of_tracks: 259,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/f3/e2/c7/f3e2c77f-86c5-7b0a-2303-831999e068e1/884977602111.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/b8/df/d6/b8dfd62b-2c13-ddb5-5dd8-0be983460624/06UMGIM10732.rgb.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music125/v4/09/95/b3/0995b3e6-1dfd-7eed-e4fc-3ec7594c8fde/06UMGIM10542.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music118/v4/6b/cc/7a/6bcc7af6-c4df-095c-fd47-c634d1c97879/00602517451810.rgb.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "US Hits 2020",
                id: "30",
                description: "US hits from 2020",
                new: "0",
                hero: "1",
                amount_of_tracks: 100,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music124/v4/c6/b7/27/c6b727f7-3a32-6b43-cee2-05bb71daf1cf/dj.itfmdeif.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music128/v4/51/cd/f6/51cdf669-d810-cb4f-d170-016a5b760f0b/886447273807.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music115/v4/84/9b/0e/849b0e1c-4f15-85f3-628d-355718103cf8/00842812110078.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music125/v4/ac/f5/19/acf51942-e001-2d6e-e0e6-49b3fd09cac4/842812106569_01_img001.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Germany Hits All Time",
                id: "64",
                description: "Hit songs in Germany from 1967 to today",
                new: "1",
                hero: "0",
                amount_of_tracks: 128,
                album_art: [
                    "https://is3-ssl.mzstatic.com/image/thumb/Music3/v4/3b/95/81/3b95816b-36c0-e47c-fa14-bd17dc6fc2c9/Livin_On_A_Prayer.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music4/v4/b5/ad/ee/b5adee0b-cc1c-3f13-67f8-2a710e2276fb/886443290587.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music112/v4/b0/f7/5d/b0f75dab-7e01-d4c6-61c3-e6253a2cae22/06UMGIM18645.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music1/v4/d2/39/da/d239dac6-df7a-fe73-5e7d-6e9e2724e57b/dj.kjblpccs.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "France",
                id: "65",
                description: "Hit songs in France",
                new: "1",
                hero: "0",
                amount_of_tracks: 99,
                album_art: [
                    "https://is2-ssl.mzstatic.com/image/thumb/Music113/v4/05/a6/ea/05a6ea7d-2410-df14-0a05-4321293f1cf1/22UM1IM22865.rgb.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music116/v4/f5/a3/d7/f5a3d757-55a8-0bfc-d096-06432b91ce7a/cover.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music126/v4/22/4e/5a/224e5a72-32f4-71f0-7c4d-41cc20e67c1b/cover.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music126/v4/d5/2b/ee/d52beeff-e3f1-7a6a-92a7-2d00b1264e96/5054197697364.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Italy",
                id: "66",
                description: "Hit songs in Italy",
                new: "1",
                hero: "0",
                amount_of_tracks: 97,
                album_art: [
                    "https://is5-ssl.mzstatic.com/image/thumb/Music126/v4/80/2c/f3/802cf3e7-d8b8-659f-b586-460e8356e7b2/5054197688690.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music126/v4/9e/87/d5/9e87d5c2-3326-ae9a-5748-742ac4a304e7/196871125048.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music126/v4/0b/97/65/0b9765b1-3603-3ac1-556c-932bb7a31182/artwork.jpg/1000x1000bb.jpg",
                    "https://is3-ssl.mzstatic.com/image/thumb/Music116/v4/bb/17/58/bb17581c-465c-fae6-0320-e22a1dd9488b/196871071512.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Spain",
                id: "67",
                description: "Hit songs in Spain",
                new: "1",
                hero: "0",
                amount_of_tracks: 99,
                album_art: [
                    "https://is1-ssl.mzstatic.com/image/thumb/Music116/v4/ad/b7/0e/adb70ef8-c456-3b31-136c-450d196d7cda/197188909819.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music126/v4/9d/15/96/9d1596ec-bf49-14cf-1e26-39efda5683bb/22UM1IM44688.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music126/v4/a8/bf/b2/a8bfb26d-20e0-87e0-e465-000685474103/196871105804.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/b0/e4/ac/b0e4ac99-eb38-7370-ea50-0bcf0bcbb054/196589949080.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Portugal",
                id: "68",
                description: "Hit songs in Portugal",
                new: "1",
                hero: "0",
                amount_of_tracks: 98,
                album_art: [
                    "https://is3-ssl.mzstatic.com/image/thumb/Music116/v4/38/07/1e/38071eb1-e761-8300-4bca-e6e1d8ae2fdf/23UMGIM44548.rgb.jpg/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music126/v4/e5/eb/29/e5eb29ec-e3ec-9f13-077a-de6bcfb6b66e/8720923452343.png/1000x1000bb.jpg",
                    "https://is1-ssl.mzstatic.com/image/thumb/Music116/v4/9e/15/b7/9e15b79c-8f20-9b78-f27e-853436eef2e1/23UMGIM31987.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/b0/e4/ac/b0e4ac99-eb38-7370-ea50-0bcf0bcbb054/196589949080.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "South Korea",
                id: "69",
                description: "Hit songs in South Korea",
                new: "1",
                hero: "0",
                amount_of_tracks: 100,
                album_art: [
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/af/2c/6d/af2c6d62-0ebc-2dff-17b3-8eeb2b3986a0/888735943621.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/61/82/b5/6182b537-b352-fcfb-c264-bcf79a4508a2/8804775254703_Cover.jpg/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music116/v4/0d/25/f8/0d25f8aa-df75-0b69-00eb-5f5e7cd7c0f5/067003046657.png/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music116/v4/17/ff/ba/17ffba08-f99d-4e23-d8fe-af42ff9e67b2/196922444470_Cover.jpg/1000x1000bb.jpg"
                ]
            },
            {
                name: "Japan",
                id: "70",
                description: "Hit songs in Japan",
                new: "1",
                hero: "0",
                amount_of_tracks: 100,
                album_art: [
                    "https://is3-ssl.mzstatic.com/image/thumb/Music126/v4/3a/17/eb/3a17eb30-eacb-82eb-51df-d1321dbb55bc/197188492205.jpg/1000x1000bb.jpg",
                    "https://is2-ssl.mzstatic.com/image/thumb/Music126/v4/9b/75/3d/9b753d91-6a17-2534-3e96-a68c8bf0fdee/23UMGIM27687.rgb.jpg/1000x1000bb.jpg",
                    "https://is4-ssl.mzstatic.com/image/thumb/Music116/v4/ee/78/3f/ee783f83-cac8-dafc-ee17-a06acfcc8714/4538182880289.png/1000x1000bb.jpg",
                    "https://is5-ssl.mzstatic.com/image/thumb/Music126/v4/2f/02/20/2f0220a9-01d3-c6d1-34b0-2469239ba211/Wind_Echoes_Tribute_to_Official_Hige_Dandism.jpg/1000x1000bb.jpg"
                ]
            }
        ];
		var air_console;

		$(document).ready(function () {
			loop1();
			document.getElementById("player").addEventListener('error', function failed(e) {
				// audio playback failed - show a message saying why
				// to get the source of the audio element use $(this).src
				if (e.target.error !== undefined) {
					switch (e.target.error.code) {
						case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
							DEBUG && console.log('The video audio not be loaded, either because the server or network failed or because the format is not supported.');
						case e.target.error.MEDIA_ERR_ABORTED:
							DEBUG && console.log('You aborted the video playback.');
						case e.target.error.MEDIA_ERR_NETWORK:
							DEBUG && console.log('A network error caused the audio download to fail.');
						case e.target.error.MEDIA_ERR_DECODE:
							DEBUG && console.log('The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.');
						default:
							DEBUG && console.log('An unknown error occurred.');
							document.playerFailed = true;
							break;
					}
				}
			}, true);
		});

		function loop1() {
			$("#ticker1").animate({ "margin-left": "-100vw" }, 15000, () => {
				$("#ticker-wrapper").prepend($("#ticker2"));
				$("#ticker1").css("margin-left", "unset");
				$("#ticker1").css("margin-right", "200vw");
				$("#ticker2").css("margin-right", "unset");
				loop2();
			});
		}

		function loop2() {
			$("#ticker2").animate({ "margin-left": "-100vw" }, 7500, () => {
				$("#ticker-wrapper").prepend($("#ticker1"));
				$("#ticker2").css("margin-left", "unset");
				$("#ticker2").css("margin-right", "200vw");
				$("#ticker1").css("margin-right", "unset");
				loop3();
			});
		}

		function loop3() {
			$("#ticker1").animate({ "margin-left": "-100vw" }, 7500, () => {
				$("#ticker-wrapper").prepend($("#ticker2"));
				$("#ticker1").css("margin-left", "unset");
				$("#ticker1").css("margin-right", "200vw");
				$("#ticker2").css("margin-right", "unset");
				loop2();
			});
		}

		function check_for_freakpants() {
			// get all controller ids
			var controller_ids = air_console.getControllerDeviceIds();
			const freakpants_uid = "89a1f2d330e4349b867e6341c6fcc892";
			var result = false;
			// loop each id with foreach
			controller_ids.forEach((controller_id) => {
				DEBUG && console.log("controller uid: " + air_console.getUID(controller_id));
				DEBUG && console.log("comparing with:" + freakpants_uid);
				DEBUG && console.log("result: " + (air_console.getUID(controller_id) === freakpants_uid));
				if (air_console.getUID(controller_id) === freakpants_uid) {
					result = true;
				}
			});
			return result;
		}


		function set_guessing_type_message() {
			switch (document.guessing_type) {
				case "guessing-both":
					$("#message").html("Guess the artist or title that is currently playing!");
					break;
				case "guessing-artist":
					$("#message").html("Guess the artist that is currently playing!");
					break;
				case "guessing-title":
					$("#message").html("Guess the title that is currently playing!");
					break;
			}
		}

		function display_loading() {
			display_loading_object = [];
			display_loading_object.push({ type: "display_loading" });
			air_console.broadcast(display_loading_object);
		}

		function hide_loading() {
			hide_loading_object = [];
			hide_loading_object.push({ type: "hide_loading" });
			air_console.broadcast(hide_loading_object);
		}

		function init() {
			air_console = new AirConsole();

			air_console.onPremium = function (device_id) {
				DEBUG && console.log("Hero User connected!");
				document.hero = true;
				check_if_playlist_needs_hero();
			}

            air_console.onPause = function (){
				DEBUG && console.log("OnPause!");

				const audioElements = document.querySelectorAll('[id^="sound-effect"]');
                for (let i = 0; i < audioElements.length; i++) {
                    audioElements[i].volume = 0;
                }

				document.paused = true;
				if (player.currentTime <= 0) {
                    document.offlinePause = 0;
                } else {
                   document.offlinePause = new Date().getTime();
                }
				player.pause();
			}

			air_console.onReady = function (){
				controller_boundary_option("first");
				if (air_console.devices[0].client.app === "bmw-mgu") {
					const audioElements = document.querySelectorAll('[id^="sound-effect"]');
					for (let i = 0; i < audioElements.length; i++) {
						audioElements[i].volume = 0;
					}
				}
			}

			air_console.onResume = function (){
				DEBUG && console.log("OnResume!");

				const audioElements = document.querySelectorAll('[id^="sound-effect"]');
                for (let i = 0; i < audioElements.length; i++) {
                    audioElements[i].volume = 1;
                }

				document.paused = false;
				if(!document.musicFailed){
					//calculate the time the game was paused until resume
					document.offlinePauseOffset += new Date().getTime() - document.offlinePause;
				    calculateRoundTime();
				    player.play();
				} else{
					document.offlinePause = 0;
			        document.offlinePauseOffset = 0;
					start();
				}	
			}

			// watch for new controllers connecting
			air_console.onConnect = function (device_id) {
				// let the new controller know how many rounds are currently selected
				update_selected_rounds_on_controllers();
				// also inform the new controller of the current limit for the selected playlist
				update_max_rounds_on_controllers();

				// update_controllers_about_game_status();

				// we actually need to do this on game start as well, for every client, since we delete the areas after the game
				initiate_guessing_area(device_id);


				/* prepare messages for clients */
				show_menu = [];
				show_menu.push({
					type: "show_menu"
				});
				hide_menu = [];
				hide_menu.push({
					type: "hide_menu"
				});
				inactive = [];
				inactive.push({
					type: "inactive"
				});
				show_back_from_credits = [];
				show_back_from_credits.push({
					type: "show_back_from_credits"
				});
				show_back_from_updates = [];
				show_back_from_updates.push({
					type: "show_back_from_updates"
				});
				show_back_to_main = [];
				show_back_to_main.push({
					type: "show_back_to_main"
				});
				show_playlist_buttons = [];
				show_playlist_buttons.push({
					type: "show_playlist_buttons"
				});
				show_settings_buttons = [];
				show_settings_buttons.push({
					type: "show_settings_buttons"
				});
                get_ready = [];
                get_ready.push({
                    type: "get_ready"
                });
				show_round_number_buttons = [];
				show_round_number_buttons.push({
					type: "show_round_number_buttons"
				});
				hide_round_number_buttons = [];
				hide_round_number_buttons.push({
					type: "hide_round_number_buttons"
				});
				show_round_change_buttons = [];
				show_round_change_buttons.push({
					type: "show_round_change_buttons"
				});
				hide_round_change_buttons = [];
				hide_round_change_buttons.push({
					type: "hide_round_change_buttons"
				});
				// check if there is currently a round in progress
				if (document.round > 0 && !document.roundEndInitiated && !document.game_over_screen) {
					DEBUG && console.log("we a currently in a game");
					// let the new client know to display the please wait message (instead of waiting for master controller)
					air_console.message(device_id, inactive);
					// store the fact that we have an inactive client in this round
					document.inactiveClients += 1;
				} else if (document.game_over_screen) {
					DEBUG && console.log("we are currently showing the game over screen");
					// if the client is master, direct him to show the back to main
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						air_console.message(device_id, show_back_to_main);
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						// otherwise, just show the regular waiting for start
						air_console.message(device_id, hide_menu);
					}
				} else if (document.showing_credits) {
					DEBUG && console.log("we are currently showing credits");
					// if we are currently showing credits, let the client know what to display
					// if the client is master, direct him to show the back from credits
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						air_console.message(device_id, show_back_from_credits);
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						// otherwise, just show the regular waiting for start
						air_console.message(device_id, hide_menu);
					}
				} else if (document.showing_updates) {
					DEBUG && console.log("we are currently showing updates");
					// if we are currently showing update, let the client know what to display
					// if the client is master, direct him to show the back from update
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						air_console.message(device_id, show_back_from_updates);
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						// otherwise, just show the regular waiting for start
						air_console.message(device_id, hide_menu);
					}
				}else if (document.show_playlist_buttons) {
					DEBUG && console.log("we are currently show playlist");
					// if we are currently showing playlist, let the client know what to display
					// if the client is master, direct him to show the back from playlist
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						air_console.message(device_id, show_playlist_buttons);
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						// otherwise, just show the regular waiting for start
						air_console.message(device_id, hide_menu);
					}
				}else if (document.show_round_change_buttons) {
					DEBUG && console.log("we are currently showing round change buttons");
					// if we are currently showing round change, let the client know what to display
					// if the client is master, direct him to show the back from round change
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						air_console.message(device_id, show_round_change_buttons);
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						// otherwise, just show the regular waiting for start
						air_console.message(device_id, hide_menu);
					}
				}else if (document.show_round_number_buttons) {
					DEBUG && console.log("we are currently show round number buttons");
					// if we are currently showing round number buttons, let the client know what to display
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						air_console.message(device_id, show_round_number_buttons);
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						// otherwise, just show the regular waiting for start
						air_console.message(device_id, hide_menu);
					}
				}else if (document.get_ready) {
					DEBUG && console.log("we are currently show get ready container");
                    air_console.message(device_id, get_ready);
				}else if (document.show_settings_buttons) {
					DEBUG && console.log("we are currently show settings buttons");
					// if we are currently showing settings buttons, let the client know what to display
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						air_console.message(device_id, show_settings_buttons);
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						// otherwise, just show the regular waiting for start
						air_console.message(device_id, hide_menu);
					}
                }else {
					DEBUG && console.log("There is no round in progress, and we are not showing credits");
					// if there is no round in progress, check if the connected device is the master
					if (air_console.getMasterControllerDeviceId() !== undefined && air_console.getMasterControllerDeviceId() === device_id) {
						DEBUG && console.log("device " + device_id + " is the master");
						// let the new client know to display the menu
						air_console.message(device_id, show_menu);
						// also let all other clients know NOT to display the menu anymore
						air_console.getControllerDeviceIds().forEach(function (id) {
							if (id === device_id) return;
							air_console.message(id, hide_menu);
						});
					} else {
						DEBUG && console.log("device " + device_id + " is not a master");
						air_console.message(device_id, hide_menu);
					}

				}

				if (check_for_freakpants()) {
					$("#connect-spotify-button").css("display", "flex");
				}
			};

			air_console.onDisconnect = function (device_id) {
				// update_controllers_about_game_status();
				// check if there is currently a round in progress
				if (document.round > 0 && !document.roundEndInitiated && !document.game_over_screen || document.get_ready || document.roundEndInitiated) {
					    removeElementFromRound(device_id)
				} else if (document.game_over_screen) {
					// let the new master know to display the back to main
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						DEBUG && console.log("informing new master to show the back to main button");
						message = [];
						message.push({
							type: "show_back_to_main"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
				} else if (document.showing_credits) {
					// let the new master know to display the back from credits
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						DEBUG && console.log("informing new master to show the back to credits button");
						message = [];
						message.push({
							type: "show_back_from_credits"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
				} else if (document.showing_updates) {
					// let the new master know to display the back from updates
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						DEBUG && console.log("informing new master to show the back to updates button");
						message = [];
						message.push({
							type: "show_back_from_updates"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
				}else if (document.show_playlist_buttons) {
					// let the new master know to display the back from playlist
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						DEBUG && console.log("informing new master to show the back to playlist button");
						message = [];
						message.push({
							type: "show_playlist_buttons"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
				}else if (document.show_round_change_buttons) {
					// let the new master know to display the back from round change
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						DEBUG && console.log("informing new master to show the back to round change button");
						message = [];
						message.push({
							type: "show_round_change_buttons"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
				}else if (document.show_round_number_buttons) {
					// let the new master know to display the back from round number
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						DEBUG && console.log("informing new master to show the back to round number button");
						message = [];
						message.push({
							type: "show_round_number_buttons"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
				}else if (document.show_settings_buttons) {
					// let the new master know to display the back from settings
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						DEBUG && console.log("informing new master to show the back to settings button");
						message = [];
						message.push({
							type: "show_settings_buttons"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
                }else if (document.get_ready) {
                    // let the new master know to display the back from get ready
                    DEBUG && console.log("informing new master to show get ready");
                    message = [];
                    message.push({
                        type: "get_ready"
                    });
                    air_console.message(device_id, get_ready);
				}
				else {
					// let the new master know to display the menu
					if (air_console.getMasterControllerDeviceId() !== undefined) {
						message = [];
						message.push({
							type: "show_menu"
						});
						air_console.message(air_console.getMasterControllerDeviceId(), message);
					}
				}
				if(document.hero && air_console.getPremiumDeviceIds() == device_id){
					DEBUG && console.log("Hero User Disconnected!");
				    document.hero = false;
				    check_if_playlist_needs_hero();
				}
			}

			// Listen for messages from other devices
			air_console.onMessage = function (from, message) {
				// handle message
				var type = message[0].type;
				DEBUG && console.log('handling ' + type + ' message on screen.');

				DEBUG && console.log(document.screen);

				switch (type) {
					case 'back':
						// play switch sound effect
						document.getElementById("sound-effect-switch").play();
						// determine what screen we are on
						switch (document.screen) {
							case "spotify":
								// go back to menu
								display_loading();
								$("#game_logo").removeClass("smallLogo");
								$("#spotify").animate({ opacity: 0 }, 1500);
								sleep(1500).then(() => {
									$("#main-menu").animate({ opacity: 1 }, 1500);
									sleep(1500).then(() => {
										hide_loading();
									});
								});
								document.screen = "main-menu";
								break;
							case "updates":
								// go back to menu
								display_loading();
								$("#game_logo").removeClass("smallLogo");
								$("#updates").animate({ opacity: 0 }, 1500);
								sleep(1500).then(() => {
									document.showing_updates = false;
									$("#main-menu").animate({ opacity: 1 }, 1500);
									$("#ticker-wrapper").animate({ opacity: 1 }, 1500);
									sleep(1500).then(() => {
										hide_loading();
									});
								});
								document.screen = "main-menu";
								break;

							case "guessing-type-selector":
							    if (typeof guessingType === "undefined") {
									document.guessing_type = "guessing-both";
								    guessingType = $("#guessing-both").html();
									$("#guessing_type").html(guessingType);
								}
                                $("#guessing_type").html(guessingType);
								$("#guessing-type-selector").hide();
								$("#option-selector").show();
								$("#titleSpec-options").html("Choose the Setting you want to change or hit start to play with the current settings.");
								document.screen = "specific-options";
								break;
							case "round-amount-selector":

							    // inform controller to hide increase/decrease buttons
								document.show_round_change_buttons = false;
								document.show_round_number_buttons = false;
								if (air_console.getMasterControllerDeviceId() !== undefined) {
									document.show_settings_buttons = true;
									air_console.message(air_console.getMasterControllerDeviceId(), show_settings_buttons);
								}

								$("#round-amount-selector").hide();
								$("#option-selector").show();
								$("#titleSpec-options").html("Choose the Setting you want to change or hit start to play with the current settings.");
								document.screen = "specific-options";
								break;
							case "specific-options":

								// go back to default selection
								controller_boundary_option("last");


								document.screen = "default-options";
								$("#specific-options").hide();
								$("#default-options").css("display", "flex");
								break;
							case "default-options":
								// go back to playlist selection
								document.screen = "playlist-selection";
								document.show_settings_buttons = false;
								// message the controller to display the playlist buttons
								if(air_console.getMasterControllerDeviceId() !== undefined) {
									document.show_playlist_buttons = true;
									air_console.message(air_console.getMasterControllerDeviceId(), show_playlist_buttons);
								}
								$("#default-options").hide();
								$("#playlist-info").hide();
								$("#playlist-display").hide();
								$("#roundCounter").hide();
								$("#playlist-selector").css("display", "flex");
								check_if_playlist_needs_hero();
								break;
							case "playlist-selection":
								// go back to menu

								$("#game_logo").removeClass("smallLogo");
								document.screen = "main-menu";
								show_main_menu_buttons = [];
								show_main_menu_buttons.push({ type: "show_main_menu_buttons" });
								// let controller know to display the main menu buttons (up down)
								air_console.broadcast(show_main_menu_buttons);
								document.show_playlist_buttons = false;
								$("#playlist-selector").hide();
								$("#main-menu").show();
								$("#ticker-wrapper").show();
								controller_boundary_option("first");
								break;
							case "credits":
								document.screen = "main-menu";
								display_loading();
								$("#credits").animate({ opacity: 0 }, 1500);
								$("#game_logo").removeClass("smallLogo");
								sleep(1500).then(() => {
									document.showing_credits = false;
									$("#credits").hide();
									$("#credits-container").hide();

									$("#main-menu").animate({ opacity: 1 }, 1500);
									$("#ticker-wrapper").animate({ opacity: 1 }, 1500);
									sleep(1500).then(() => {
										hide_loading();
									});
								});
								break;
						}
						break;
					case 'select':
						controller_boundary_option(false);
						// play switch sound effect
						document.getElementById("sound-effect-switch").play();
						// determine what screen we are on
						switch (document.screen) {
							case "spotify":
								var masterId = air_console.getMasterControllerDeviceId();
								var masterUID = air_console.getUID(masterId);
								var url = "https://8080-d4794a7b-7ff0-4db9-8e67-33f69cf31cb2.cs-europe-west1-onse.cloudshell.dev/?authuser=0&uid=" + masterUID;
								air_console.openExternalUrl(url);
								break;
							case "splash":
								DEBUG && console.log("handling confirm button on splash screen");
								$("#splash-screen").animate({ opacity: 0 }, 1500);

								// inform master controller to display loading
								display_loading();

								sleep(1500).then(() => {
									$("#main-menu").animate({ opacity: 1 }, 1500);
									$("#ticker-wrapper").animate({ opacity: 1 }, 1500);
									sleep(1500).then(() => {
										// inform master controller to hide loading
										hide_loading();
									});
								});
								document.screen = "main-menu";
								break;
							case "main-menu":
								DEBUG && console.log("handling confirm button in main menu");
								switch (document.menu) {
									case "new-game":
										DEBUG && console.log("showing playlist selector for new game");
										display_loading();
										document.maxRound = 15;
										$("#main-menu").hide();
										$("#ticker-wrapper").hide();
										$("#playlist-selector .dialogue").css("display", "flex");
										$("#playlist-selector .dialogue-wrapper").css("display", "flex");
										$("#game_logo").addClass("smallLogo");
										sleep(1500).then(() => {
											$("#playlist-selector").css("display", "flex");
											hide_loading();
											if (air_console.getMasterControllerDeviceId() !== undefined) {
												document.show_playlist_buttons = true;
												air_console.message(air_console.getMasterControllerDeviceId(), show_playlist_buttons);
											}
											check_if_playlist_needs_hero();
										});
										document.screen = "playlist-selection";
										break;
									case "credits":
										DEBUG && console.log("showing credits");
										display_loading();
										$("#main-menu").animate({ opacity: 0 }, 1500);
										$("#ticker-wrapper").animate({ opacity: 0 }, 1500);
										$("#game_logo").addClass("smallLogo");
										$("#playlist-selector").hide("fade", {}, 1500);
										$("#credits-container").show();
										$("#credits").css({ display: "flex" });
										sleep(1500).then(() => {
											document.showing_credits = true;
											$("#credits").animate({ opacity: 1 }, 1500);
											sleep(1500).then(() => {
												if (air_console.getMasterControllerDeviceId() !== undefined) {
													air_console.message(air_console.getMasterControllerDeviceId(), show_back_from_credits);
												}
											});
										});
										document.screen = "credits";
										break;
									case "updates":
										DEBUG && console.log("displaying latest updates");
										display_loading();
										$("#main-menu").animate({ opacity: 0 }, 1500);
										$("#ticker-wrapper").animate({ opacity: 0 }, 1500);
										$("#game_logo").addClass("smallLogo");
										$("#updates").show();
										$("#updates").animate({ opacity: 1 }, 1500);
										sleep(1500).then(() => {
											document.showing_updates = true;
											hide_loading();
											if (air_console.getMasterControllerDeviceId() !== undefined) {
												air_console.message(air_console.getMasterControllerDeviceId(), show_back_from_updates);
											}
										});
										document.screen = "updates";
										break;
									case "spotify":
										DEBUG && console.log("spotify menu");
										// 
										var masterControllerId = air_console.getMasterControllerDeviceId();
										var masterUser = air_console.getNickname(masterControllerId);
										var uid = air_console.getUID(masterControllerId);
										console.log(masterUser);
										console.log(uid);
										$("#master-user").html("freakpants");

										display_loading();
										$("#main-menu").animate({ opacity: 0 }, 1500);
										$("#ticker-wrapper").animate({ opacity: 0 }, 1500);
										$("#game_logo").addClass("smallLogo");
										$("#spotify").css("display", "flex");
										$("#spotify").animate({ opacity: 0.9 }, 1500);
										sleep(1500).then(() => {
											hide_loading();
										});
										document.screen = "spotify";
										break;
								}
								break;
							case "guessing-type-selector":
								active_option = $("#guessing-type-selector .active");
								document.guessing_type = $(active_option).attr("id");
								$("#guessing-type-selector").hide();
								$("#titleSpec-options").html("Choose the Setting you want to change or hit start to play with the current settings.");
								guessingType = $(active_option).html();
								if($(active_option).hasClass("guessType")){
									$("#guessing_type").addClass("guessType");
								} else{
									$("#guessing_type").removeClass("guessType");
								}
								document.screen = "specific-options";
								$("#guessing_type").html(guessingType);
								$("#option-selector").show();
								break;
							case "round-amount-selector":
								DEBUG && console.log("saving selected round amount and going back to specific options");

								active_option = $("#round-amount-selector .active");
								if ($(active_option).hasClass("custom-amount")) {
									// just go back, since we have already set document.maxRound
								} else {
									document.maxRound = parseInt($(active_option).find(".button-text").html());
								}
								$("#round-amount-selector").hide();
								$("#titleSpec-options").html("Choose the Setting you want to change or hit start to play with the current settings.");
								$("#option-selector").show();
								document.screen = "specific-options";

								// inform controller to hide increase/decrease buttons
								document.show_round_change_buttons = false;
								document.show_round_number_buttons = false;
								if (air_console.getMasterControllerDeviceId() !== undefined) {
									document.show_settings_buttons = true;
									air_console.message(air_console.getMasterControllerDeviceId(), show_settings_buttons);
								}
								break;
							case "specific-options":
								DEBUG && console.log("handling confirm button on specific options");

								switch (document.setting) {
									case "round_amount":
										controller_boundary_option("first");
										document.screen = "round-amount-selector";
										$("#option-selector").hide();

										let max_rounds = "Error: No playlist is selected. Please restart the game.";
										if (playlists[document.selectedPlaylist] !== undefined) {
											max_rounds = playlists[document.selectedPlaylist]['amount_of_tracks'];
										}

										$("#titleSpec-options").html("How many rounds do you want to play? (Max " + max_rounds + ")");
										$("#round-amount-selector").css("display", "flex");

										// reset the options to the first setting
										$("#round-amount-selector li").removeClass("active");
										const firstOption = $("#round-amount-selector li").first();
										$(firstOption).addClass("active");
										$("#roundCounter").show();
										$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + $(firstOption).find(".button-text").html() + " Rounds");
										document.show_settings_buttons = false;
										show_round_number_buttons = [];
								        show_round_number_buttons.push({ type: "show_round_number_buttons" });
								        if (air_console.getMasterControllerDeviceId() !== undefined) {
											document.show_round_number_buttons = true;
								            air_console.message(air_console.getMasterControllerDeviceId(), show_round_number_buttons);
								        }
								        air_console.broadcast(show_round_number_buttons);
										break;
									case "guessing_type":
										controller_boundary_option("first");
										$(".guessing-option").removeClass("active");
										$("#guessing-artist").addClass("active");
										//document.guessing_type = "guessing-artist";
										//guessingType = $("#guessing-artist").html();
										//$("#guessing_type").html(guessingType);

										document.screen = "guessing-type-selector";
										$("#option-selector").hide();
										$("#titleSpec-options").html("Select whether each round players have to guess either artist or title randomly, or only one of each.");
										$("#guessing-type-selector").css("display", "flex");
										break;
									case "start":
										DEBUG && console.log("starting the game after specific options were chosen");
										$(".dialogue").hide();
										$("#specific-options").hide();
										// start the game
										document.getElementById("sound-effect-start").play();
										document.screen = "playing";
										start();
										break;
								}

								break;
							case "default-options":
								controller_boundary_option("first");
								DEBUG && console.log("handling confirm button on default options");
								$("#default-options").hide();
								if (document.default) {
									// start the game
									DEBUG && console.log("starting the game with default options");
									document.getElementById("sound-effect-start").play();
									document.screen = "playing";
									start();
								} else {
									// go to specific options
									$("#option-selector li").removeClass("active");
									$("#option-selector li:first").addClass("active");

									// select number of rounds to play button
									document.setting = "round_amount";

									DEBUG && console.log("showing specific options");
									document.screen = "specific-options";
									$("#titleSpec-options").html("Choose the Setting you want to change or hit start to play with the current settings.");
									$("#titleSpec-options").show();
									$("#specific-options").css("display", "flex");
								}
								break;
							case "playlist-selection":

								controller_boundary_option("first");



								// set default yes to active
								document.default = true;
								$("#default-yes").addClass("active");
								$("#default-no").removeClass("active");

								DEBUG && console.log("going to default options");
								// go to default option prompt
								document.screen = "default-options";
								document.show_playlist_buttons = false;
								document.show_round_number_buttons = false;
								if (air_console.getMasterControllerDeviceId() !== undefined) {
									document.show_settings_buttons = true;
									air_console.message(air_console.getMasterControllerDeviceId(), show_settings_buttons);
								}
								$("#playlist-selector").hide();
								$("#default-options").css("display", "flex");
								$("#default-options .dialogue").css("display", "flex");
								$("#playlist-info").css("top", "86%");
								$("#playlist-info").css("display", "-webkit-box");
								// display selected playlist
								$("#playlist-display").show();
								var playlistName = playlists[document.selectedPlaylist].name;
                                if (playlistName.length > 14) {
                                  playlistName = playlistName.substring(0, 14) + "...";
                                }
								$("#playlist-display").html('<span style="color: #ffdc40; font-weight: 600;">Playlist:</span> ' + playlistName);

								// display round amount to play
								$("#roundCounter").show();
								$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + document.maxRound);
								break;
						}
						break;
					case 'correctGuess':
						// play the correct guess sound
						document.getElementById("sound-effect-correct").play();
						// deal with the score changes etc
						if (!document.cancelled) {
							handle_guess(message, from);
						}
						break;
					case 'wrongGuess':
						// play the wrong guess sound
						document.getElementById("sound-effect-wrong").play();
						// deal with the score changes etc
						if (!document.cancelled) {
							handle_guess(message, from);
						}
						break;
					case 'next':
						// play switch sound effect
						document.getElementById("sound-effect-switch").play();
						// determine where we are
						switch (document.screen) {
							case "guessing-type-selector":
								active_option = $("#guessing-type-selector .active");
								if ($(active_option).is(':last-child')) {
									next_option = $("#guessing-type-selector li").first();
								} else {
									next_option = $(active_option).next();
								}

								if ($(next_option).is(':last-child')) {
									controller_boundary_option("last");
								} else {
									controller_boundary_option(false);
								}

								$(active_option).removeClass("active");
								$(next_option).addClass("active");
								break;
							case "round-amount-selector":
								active_option = $("#round-amount-selector .active");
								if ($(active_option).hasClass("custom-amount")) {
									next_option = $("#round-amount-selector li").first();
								} else {
									next_option = $(active_option).next();
								}

								if ($(next_option).is(':last-child')) {
									controller_boundary_option("last");
								} else {
									controller_boundary_option(false);
								}

								$(active_option).removeClass("active");
								$(next_option).addClass("active");
								if ($(next_option).hasClass("custom-amount")) {
									//document.maxRound = document.defaultMaxRound;
									$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + document.maxRound + " Rounds");
									// inform controller to display increase/decrease buttons
									show_round_change_buttons = [];
									show_round_change_buttons.push({ type: "show_round_change_buttons" });
									document.show_round_change_buttons = true;
									document.show_playlist_buttons = false;
									air_console.broadcast(show_round_change_buttons);
								} else {
									// inform controller to hide increase/decrease buttons
									document.show_round_change_buttons = false;
									document.show_playlist_buttons = false;
									show_round_number_buttons = [];
								        show_round_number_buttons.push({ type: "show_round_number_buttons" });
								        if (air_console.getMasterControllerDeviceId() !== undefined) {
											document.show_round_number_buttons = true;
								            air_console.message(air_console.getMasterControllerDeviceId(), show_round_number_buttons);
								        }
								        air_console.broadcast(show_round_number_buttons);
									$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + $(next_option).find(".button-text").html() + " Rounds");
								}

								break;
							case "specific-options":
								switch (document.setting) {
									case "round_amount":
										document.setting = "guessing_type";
										$("#round_amount_option").removeClass("active");
										$("#guessing_type").addClass("active");
										controller_boundary_option(false);
										break;
									case "guessing_type":
										document.setting = "start";
										$("#guessing_type").removeClass("active");
										$("#specific-start").addClass("active");
										controller_boundary_option("last");
										break;
									case "start":
									    document.setting = "round_amount";
									    $("#specific-start").removeClass("active");
									    $("#round_amount_option").addClass("active");
									    controller_boundary_option("last");
									    break;
								}

								break;
							case "default-options":
								if (document.default) {
									document.default = false;
									$("#default-no").addClass("active");
									$("#default-yes").removeClass("active");
									//controller_boundary_option("last");
								} else {
									//controller_boundary_option("first");
									document.default = true;
									$("#default-yes").addClass("active");
									$("#default-no").removeClass("active");
								}
								break;
							case "playlist-selection":
								switch_playlist('next');
								break;
							case "main-menu":
								switch (document.menu) {
									case "new-game":
										document.menu = "credits";
										$("#new-game-button").removeClass("active");
										$("#credits-button").addClass("active");
										controller_boundary_option(false);
										break;
									case "credits":
										document.menu = "updates";
										$("#credits-button").removeClass("active");
										$("#updates-button").addClass("active");
										if (!check_for_freakpants()) {
											controller_boundary_option("last");
										} else {
											controller_boundary_option(false);
										}
										break;
									case "updates":
										/*
										if (check_for_freakpants()) {
											controller_boundary_option("last");
											document.menu = "spotify";
											$("#updates-button").removeClass("active");
											$("#connect-spotify-button").addClass("active");
										} else {
											// dont do anything at the last spot
											// document.menu = "new-game";
											// $("#updates-button").removeClass("active");
											// $("#new-game-button").addClass("active");
										}
										*/
										document.menu = "new-game";
										$("#updates-button").removeClass("active");
									    $("#new-game-button").addClass("active");

										break;
									case "spotify":
									/* document.menu = "new-game";
									$("#connect-spotify-button").removeClass("active");
									$("#new-game-button").addClass("active"); */
								}
								break;
						}
						break;
					case 'previous':
						// play switch sound effect
						document.getElementById("sound-effect-switch").play();
						// determine where we are
						switch (document.screen) {
							case "guessing-type-selector":
								active_option = $("#guessing-type-selector .active");
								if ($(active_option).is(':first-child')) {
									previous_option = $("#guessing-type-selector li").last();
								} else {
									previous_option = $(active_option).prev();
								}

								if ($(active_option).is(':first-child')) {
									controller_boundary_option("first");
								} else {
									controller_boundary_option(false);
								}

								$(active_option).removeClass("active");
								$(previous_option).addClass("active");

								break;
							case "round-amount-selector":
								active_option = $("#round-amount-selector .active");
								if ($(active_option).is(':first-child')) {
									previous_option = $("#round-amount-selector li").last();
								} else {
									previous_option = $(active_option).prev();
								}

								if ($(previous_option).is(':first-child')) {
									controller_boundary_option("first");
								} else {
									controller_boundary_option(false);
								}

								$(active_option).removeClass("active");
								$(previous_option).addClass("active");
								if ($(previous_option).hasClass("custom-amount")) {
									//document.maxRound = document.defaultMaxRound;
									$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + document.maxRound + " Rounds");
									// inform controller to display increase/decrease buttons
									show_round_change_buttons = [];
									show_round_change_buttons.push({ type: "show_round_change_buttons" });
									document.show_round_change_buttons = true;
									document.show_playlist_buttons = false;
									air_console.broadcast(show_round_change_buttons);
								} else {
									// inform controller to hide increase/decrease buttons
									document.show_playlist_buttons = true;
									document.show_round_change_buttons = false;
									show_round_number_buttons = [];
								        show_round_number_buttons.push({ type: "show_round_number_buttons" });
								        if (air_console.getMasterControllerDeviceId() !== undefined) {
											document.show_round_number_buttons = true;
								            air_console.message(air_console.getMasterControllerDeviceId(), show_round_number_buttons);
								        }
								        air_console.broadcast(show_round_number_buttons);
									$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + $(previous_option).find(".button-text").html() + " Rounds");
								}

								break;
							case "specific-options":
								switch (document.setting) {
									case "round_amount":
									    document.setting = "start";
									    $("#round_amount_option").removeClass("active");
									    $("#specific-start").addClass("active");
									break; 
									case "guessing_type":
										document.setting = "round_amount";
										$("#guessing_type").removeClass("active");
										$("#round_amount_option").addClass("active");
										controller_boundary_option("first");
										break;
									case "start":
										document.setting = "guessing_type";
										$("#specific-start").removeClass("active");
										$("#guessing_type").addClass("active");
										controller_boundary_option(false);
										break;
								}
								break;
							case "default-options":
								if (document.default) {
									document.default = false;
									$("#default-no").addClass("active");
									$("#default-yes").removeClass("active");
								} else {
									document.default = true;
									$("#default-yes").addClass("active");
									$("#default-no").removeClass("active");
									controller_boundary_option("first");
								}
							case "playlist-selection":
								switch_playlist('previous');
								break;
							case "main-menu":
								switch (document.menu) {
									case "new-game":
									    document.menu = "updates";
										$("#new-game-button").removeClass("active");
										$("#updates-button").addClass("active");
										// dont do anything at the first selection
										/* 
										if (check_for_freakpants()) {
											document.menu = "spotify";
											$("#new-game-button").removeClass("active");
											$("#connect-spotify-button").addClass("active");
										} else {
											document.menu = "updates";
											$("#new-game-button").removeClass("active");
											$("#updates-button").addClass("active");
										} */

										break;
									case "credits":
										document.menu = "new-game";
										$("#credits-button").removeClass("active");
										$("#new-game-button").addClass("active");
										//controller_boundary_option("first");
										break;
									case "updates":
										document.menu = "credits";
										$("#updates-button").removeClass("active");
										$("#credits-button").addClass("active");
										//controller_boundary_option(false);
										break;
                                        /*
									case "spotify":
										document.menu = "updates";
										$("#connect-spotify-button").removeClass("active");
										$("#updates-button").addClass("active");
										break;
                                         */
								}
								break;
						}
						break;
					case 'decrease_rounds':
						document.getElementById("sound-effect-click").play();
						document.maxRound = document.maxRound - 1;
						$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + document.maxRound + " Rounds");
						update_selected_rounds_on_controllers();
						break;
					case 'increase_rounds':
						// check if the maximum amount of rounds for this playlist has been reached or not
						if (playlists[document.selectedPlaylist] !== undefined &&
							((document.maxRound) == playlists[document.selectedPlaylist]['amount_of_tracks'])) {
							// dont increase
						} else {
							document.getElementById("sound-effect-click").play();
							document.maxRound = document.maxRound + 1;
							$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + document.maxRound + " Rounds");
							update_selected_rounds_on_controllers();
						}
						break;
					case 'cancel':
						controller_boundary_option("first");
						$("#message").html("");
						$("#message-blur").hide();
						$("#playlist-info").hide();
						$("#roundCounter").hide();
						$("#playlist-display").hide();
						// inform other controllers
						hide_menu = [];
						hide_menu.push({
							type: "hide_menu"
						});

						// in case some controllers were still waiting
						sleep(2000).then(() => {
							air_console.broadcast(hide_menu);
						});

						document.cancelled = true;
						document.roundEndInitiated = true;

						document.amount_of_finished_players = 0;

						document.game_in_progress = false;
						document.game_over_screen = false;

						player = document.getElementById("player");
						player.volume = 0;

						$("#animationTime").hide();
						$("#current_song_service").hide();
						$("#animationTime").hide();

						// reset the results area and the round status
						$("#results-scrollable").html("");
						$("#status-wrapper").hide();
						$("#status").hide();
						$("#status").html("");

						$("#victory_screen").hide();
						$("#victory_screen").html("");

						$("#game_logo").show("fade", {}, 1500);
						// remove small logo class to trigger transition to big
						$("#game_logo").removeClass("smallLogo");

						// $("#playlist-selector").show("fade", {}, 1500);
						$("#main-menu").show();
						$("#ticker-wrapper").show();
						document.screen = "main-menu";

						break;
					case 'back_to_main':
						controller_boundary_option("first");
						document.screen = "main-menu";
						$("#message").html("");
						$("#message-blur").hide();
						// $("#message").hide("fade", {}, 1500);

						document.game_in_progress = false;
						document.game_over_screen = false;

						// reset the results area and the round status
						$("#results-scrollable").html("");
						$("#status-wrapper").hide();
						$("#status").hide();
						$("#status").html("");

						$("#victory_screen").hide();
						$("#victory_screen").html("");

						/* back_to_main = [];
						back_to_main.push({ type: "back_to_main" }); */

						$("#game_logo").removeClass("smallLogo");
						$("#game_logo").show("fade", {}, 1500);

						$("#main-menu").show();
						$("#ticker-wrapper").show();
						// $("#playlist-selector").show("fade", {}, 1500);

						// air_console.broadcast(back_to_main);

						break;
				}
			};

			air_console.onAdShow = function () {
				DEBUG && console.log("ad has started showing");
				document.ad_showing = true;
			};

			air_console.onAdComplete = function (ad_was_shown) {
				DEBUG && console.log("onAdComplete is triggered");
				document.ad_showing = false;
				document.roundEndInitiated = true;
				next_round();
			};

			// get the playlists info
			// $.ajax({ method: "GET", url: "playlists/playlist_info.json", data: {}, dataType: "json" })
			// .done(function (msg) {
			// playlists = msg;
			// display info for the first playlist

			html = '';
			counter = 0;
			middle_id = Math.floor(playlists.length / 2);

			/* playlists.forEach(function (playlist) {
				DEBUG && console.log("loading playlist");
				DEBUG && console.log(playlist);
				if (counter === middle_id) {
					// defaults to popular stuff
					document.selectedPlaylist = counter;
					update_max_rounds_on_controllers();
					html += '<div id="playlist_' + counter + '" data-html-id="' + counter + '" class="album_art active">';
				} else {
					html += '<div id="playlist_' + counter + '" data-html-id="' + counter + '" class="album_art">';
				}

				if (air_console !== undefined) {
					air_console.devices.forEach(device_object => {
						if (device_object !== undefined && device_object !== null && device_object.client !== null && device.client.low_performance) {
							document.low_performance = true;
						}
					});
				}

				// dont even add the images on the gamehub app
				if (!document.low_performance) {
					playlist.album_art.forEach(function (element) {
						html = html + '<img src="' + element + '" />';
					});
					$("#screen-wrapper").append('<img id="playanimation" src="audio.svg" />');
					$("body").append('<video playsinline autoplay muted loop id="bgvid"><source src="videos/disco_loop.mp4" type="video/mp4"></video>');
					if (playlist.new === "1") {
						html = html + '<span class="new-sticker">NEW!</span>';
					}
				}

				html += '<div class="playlist-text"><b>' + playlist.name + '</b>';
				html += playlist.amount_of_tracks + ' Tracks</br>';
				html += '<span class="playlist-description">' + playlist.description + '</span>';
				html += '</div>';
				html += '</div>';
				counter++;
			}); */

			document.selectedPlaylist = 1;
			update_max_rounds_on_controllers();

			DEBUG && console.log(playlists);

			if (air_console !== undefined) {
				air_console.devices.forEach(device_object => {
					if (device_object !== undefined && device_object !== null && device_object.client !== null && device.client.low_performance) {
						document.low_performance = true;
					}
				});
			}

			var add_to_storage_only = false;
			document.playlist_storage = [];
			var playlist_html;

			//$("#screen-wrapper").append('<img id="playanimation" src="audio.svg" />');
			$("body").prepend('<div id="fallimg" style="position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; background-image:url(images/screen/fallback.jpg); background-size:cover; background-position:center;"></div>');
			$("body").append('<video playsinline autoplay muted loop id="bgvid"><source src="videos/disco_loop.mp4" type="video/mp4" muted="muted"></video>');

			//remove fallback image when video is loaded
			$("#bgvid").on("loadedmetadata", function() {
              $("#fallimg").remove();
            });

			playlists.every(function (playlist) {

				if (counter > 2) {
					add_to_storage_only = true;
				}
				DEBUG && console.log("loading playlist");
				DEBUG && console.log(playlist);
				DEBUG && console.log(playlist.name);
				if (!add_to_storage_only) {
					switch (counter) {
						case 0:
							html += '<div id="playlist_' + counter + '" data-html-id="' + counter + '" class="album_art previous">';
							break;
						case 1:
							html += '<div id="playlist_' + counter + '" data-html-id="' + counter + '" class="album_art active">';
							break;
						case 2:
							html += '<div id="playlist_' + counter + '" data-html-id="' + counter + '" class="album_art next">';
							break;
					}
				}

				playlist_html = '';
				// dont even add the images on the gamehub app
				// document.low_performance = true;
				if (!document.low_performance) {
					playlist.album_art.forEach(function (element) {
						if (!add_to_storage_only) {
							lowResol = element.replace('/1000x1000bb.jpg', '/100x100bb.jpg');
							html = html + '<img src="' + lowResol + '" />';
						}
						playlist_html += '<img src="' + element + '" />';
					});
					if (playlist.new === "1") {
						if (!add_to_storage_only) {
							html = html + '<span class="new-sticker">NEW!</span>';
						}
						playlist_html += '<span class="new-sticker">NEW!</span>';
					}
					if (playlist.hero === "1") {
						if (!add_to_storage_only) {
							html = html + '<span class="hero-sticker"><img id="hero-image" src="images/hero.gif" /></span>';
						}
						playlist_html += '<span class="hero-sticker"><img id="hero-image" src="images/hero.gif" /></span>';
					}
				}

				if (!add_to_storage_only) {
					html += '<div class="playlist-text-wrapper"><div class="playlist-text">' + playlist.name;
				}
				playlist_html += '<div class="playlist-text-wrapper"><div class="playlist-text">' + playlist.name;
				if (counter === 1) {
					details = '<div id="details-wrapper"><div id="playlist-details" class="image-element text-allign"><span class="playlist-track-count button-text">' + playlist.amount_of_tracks + ' Tracks</span>';
					details += '<span class="playlist-description button-text">' + playlist.description + '</span></div></div>';
				}
				if (!add_to_storage_only) {
					html += '</div></div>';
					html += '<div id="disc-hole-wrapper" ><div id="disc-hole"></div></div>';
					html += '</div>';
				}

				playlist_html += '</div></div>';
				playlist_html += '<div id="disc-hole-wrapper" ><div id="disc-hole"></div></div>';
				playlist_html += '</div>';

				document.playlist_storage[counter] = playlist_html;

				counter++;
				return true;
			});

			DEBUG && console.log(document.playlist_storage);

			$("#playlist-selector").append(html);
			$("#playlist-selector").append(details);
			// $("#playlist-selector").css("display", "flex");

			// go to a specific playlist (workaround until rewrite)
			// switch_playlist("next");
			switch_playlist("previous");
			switch_playlist("previous");
			switch_playlist("previous");
			switch_playlist("previous");
			switch_playlist("previous");

			//	});
		}



		function calculateRoundTime() {
            if(document.paused || player.currentTime <= 0){
				//Add the time that passed while the game was paused to the round time
				document.RoundStartTime = new Date().getTime() - (document.RoundTimeSetting - document.RoundTime) * 1000;	
				document.test = new Date().getTime();
			} else if(!document.paused || player.currentTime > 0){
                // calculate the difference between the start of the round and now
			    currentTime = new Date().getTime();
			    timePassed = Math.floor((currentTime - document.RoundStartTime) / 1000);
			    // substract the time passed from the roundtime setting (30 secs unless set otherwise)
			    document.RoundTime = document.RoundTimeSetting - timePassed;
			}
			// display the current time on the UI
			$("#roundTime").html(document.RoundTime);
			$("#TimerBlur").show();

			if (document.RoundTime === 6 && !document.animatingVolume) {
				document.animatingVolume = true;
				$("#player").animate({ volume: 0 }, 6000);
			}

			// if in an active round, since a disconnect isnt registered instantly, keep checking if the round is actually already over
			if (document.round > 0 && !document.roundEndInitiated) {
				check_if_all_players_have_guessed();
			}

			if (document.playerFailed) {
				DEBUG && console.log("player failed, skipping song");
				$("#animationTime").hide();
				$("#message-blur").show();
				$("#message").html("Broken song, skipping!");

				skipping = [];
				skipping.push({ type: "skipping" });
				air_console.broadcast(skipping);
				document.roundEndInitiated = true;
				round_end();
			}

			// this generates a whole lot of log lines, because it is calling itself permanently
			// DEBUG && console.log("roundendinitiated: " + document.roundEndInitiated);
			if (document.RoundTime > 0 && document.roundEndInitiated === false) {
				// this generates a whole lot of log lines, because it is calling itself permanently
				// DEBUG && console.log("checking if we are out of time");
				setTimeout(calculateRoundTime, 0);
			} else if (document.roundEndInitiated === false) {
				DEBUG && console.log("out of time");
				// give 30 seconds to everyone who did not guess
				air_console.getControllerDeviceIds().forEach(function (id) {
					// try selecting current score
					playerScore = document.playerScores.filter(function (obj) {
						return obj.player === id;
					});

					if (playerScore[0]) {
						playerScore[0].currentGuessTime = 30;
						playerScore[0].totalGuessTime += 30;
					} else {
						initialize_player_score(id, 0, 30, 30, false);
					}
				});

				// time has run out, tell the remaining controllers to also switch to the round over state
				out_of_time = [];
				out_of_time.push({ type: "out_of_time" });
				air_console.broadcast(out_of_time);
				document.roundEndInitiated = true;
				if(document.game_in_progress){
				round_end();
				}
			}
		}

		function removeElementFromRound(device_id){
			var disconnectElement = document.querySelector("[id*='_id_" + device_id + "_result']");
			if (disconnectElement) {
				disconnectElement.remove();
				for (let i = 0; i < document.playerScores.length; i++) {
					if (device_id === document.playerScores[i].player) {
						document.playerScores[i] = [];
						if (i !== -1) {
							document.playerScores.splice(i, 1);
						}
						break;
					}
				}

				document.playerScores.sort(function (a, b) {
					return b.score - a.score;
				});

				//Update positions of players
				for (var i = 0; i < document.playerScores.length; i++) {
					document.playerScores[i].position = i + 1;
					$("#player_" + air_console.getNickname(document.playerScores[i].player) + "_id_" + document.playerScores[i].player + "_result").find(".position_display").html(document.playerScores[i].position);
				}
				send_score();
				console.log("deleted the element of the player that disconnected");
			}else{
				console.log("element not found");
			}
		}

		function controller_boundary_option(type) {
			// let the master controller know not to display the corresponding button
			// determine master controller
			master_controller = air_console.getMasterControllerDeviceId();
			// prepare message
			message = [];
			message.push({ type: "boundary", boundary: type });
			// send message to master controller
			air_console.message(master_controller, message);
		}

		function initiateScrollingCheck() {
			// check if the guessing area needs to scroll
			determine_result_area_size();
			// call the function itself again
			if (document.game_in_progress) {
				setTimeout(initiateScrollingCheck, 475);
			}
		}

		document.scroll_in_progress = false;
		document.last_scroll_direction = "left";
		document.last_scroll_ended = new Date().getTime();

		function scroll() {
			currentTime = new Date().getTime();
			timePassed = Math.floor((currentTime - document.last_scroll_ended) / 1000);

			if (document.scroll_results && !document.scroll_in_progress && timePassed >= 1) {
				document.scroll_in_progress = true;
				scrollTime = 1000 * document.overlapping_result_areas;
				scrollDistance = $(".single-result").first().outerWidth(true) * -1 * document.overlapping_result_areas;


				if (document.last_scroll_direction == 'right') {
					$("#results-scrollable").animate({ left: scrollDistance + 'px' }, scrollTime, function () {
						document.last_scroll_direction = "left";
						document.scroll_in_progress = false;
						document.last_scroll_ended = new Date().getTime();
					});
				} else {
					$("#results-scrollable").animate({ left: '0px' }, scrollTime, function () {
						document.last_scroll_direction = "right";
						document.scroll_in_progress = false;
						document.last_scroll_ended = new Date().getTime();
					});
				}
				// console.log("scrolling " + scrollDistance + "px for " + scrollTime + " milliseconds.");
			}
		}

		function determine_result_area_size() {
			// this function checks whether or not we need to make the result area scrollable

			full_window_width = $(window).width();
			// substract the size of the timer
			available_area_width = full_window_width - $("#animationTime").outerWidth(true);

			single_result_area_width = $(".single-result").first().outerWidth(true);
			// console.log("size of one result area: " + single_result_area_width);
			number_of_possible_result_areas = Math.floor(available_area_width / single_result_area_width);
			// console.log("amount of result areas that fit onto the screen before scrolling: " + number_of_possible_result_areas);

			// set the size of the result area so there are no cut off result areas (unless scrolling of course)

			//$("#player-results").width(number_of_possible_result_areas * single_result_area_width);

			// also set the margins of the result area, so it is centered on the available space
			// results_margin_left = (available_area_width - $("#player-results").width()) / 2;
			// $("#player-results").css('margin-left', results_margin_left + 'px')
			// console.log("margin: " + results_margin_left);

			number_of_actual_result_areas = $(".single-result").length;
			// console.log("amount of result areas: " +  number_of_actual_result_areas);

			document.overlapping_result_areas = number_of_actual_result_areas - number_of_possible_result_areas;

			// check if a line break is happening
			if (number_of_actual_result_areas > number_of_possible_result_areas) {
				// console.log("line break is happening!");
				// store last amount of overlapping areas for reset purposes
				document.last_overlap_amount = document.overlapping_result_areas;
				if (!document.scroll_in_progress) {
					document.scroll_results = true;
					scroll();
				}
			} else {
				// disable the scrolling
				if (!document.scroll_in_progress && document.last_scroll_direction == "left") {
					document.scroll_in_progress = true;
					// scroll back to initial position
					scrollTime = 1000 * document.last_overlap_amount;
					$("#results-scrollable").animate({ left: '0px' }, scrollTime, function () {
						document.last_scroll_direction = "right";
						document.scroll_in_progress = false;
						document.last_scroll_ended = new Date().getTime();
					});
				}
				document.scroll_results = false;
			}
			// console.log("size of full window: " + full_window_width);	
		}

		function start() {

			DEBUG && console.log("start function initiated");
			document.cancelled = false;

			document.roundDifficultyResults = [];

			// reset in case we cancelled an earlier game
			document.roundEndInitiated = false;
			document.show_settings_buttons = false;

			// inform controllers to display get ready
			document.get_ready = true;
			get_ready = [];
			get_ready.push({ type: "get_ready" });
			air_console.broadcast(get_ready);

			// reset guessing areas
			$("#results-scrollable").html("");
			$("#playlist-info").css("top", "86%");

			// create guessing areas for all controllers
			const device_ids = air_console.getControllerDeviceIds();
			device_ids.forEach(function (id) {
				initiate_guessing_area(id);
			});

			// fade logo
			$("#game_logo").hide("fade", {}, 1500);
            
			sleep(1500).then(() => {
				$("#status-wrapper").show();
				if(document.paused){
					document.musicFailed = true;
					$("#message").html("countdown paused");
					return;
				} else{
                    // show message again (may have been hidden by end of game)
				    $("#message").css({ display: "flex" });
					$("#message-blur").show();
				    $("#status").css({ display: "flex" });
				    $("#message").html("Get ready for the first round!");
				    $("#status").html("3");
				    document.getElementById("sound-effect-clock").play();
				}
				sleep(1000).then(() => {

					if(document.paused){
					    document.musicFailed = true;
						$("#message").html("countdown paused");
					    return;
				    } else{
						document.getElementById("sound-effect-clock").play();
						$("#message").html("Get ready for the first round!");
					    $("#status").html("2");
					}
					sleep(1000).then(() => {

						if(document.paused){
					       document.musicFailed = true;
						   $("#message").html("countdown paused");
					       return;
				        }else{
						   document.getElementById("sound-effect-clock").play();
						   $("#message").html("Get ready for the first round!");
						   $("#status").html("1");
						}

						sleep(1000).then(() => {
							$("#roundCounter").show();
							$("#playlist-display").show();
							$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + "1/" + document.maxRound);
							var playlistName = playlists[document.selectedPlaylist].name;
                                if (playlistName.length > 14) {
                                  playlistName = playlistName.substring(0, 14) + "...";
                                }
							$("#playlist-display").html('<span style="color: #ffdc40; font-weight: 600;">Playlist:</span> ' + playlistName);

							$("#status").hide();
							$("#status").html("");

							$("#message").html("Get ready for the first round!");

							document.game_in_progress = true;
							document.get_ready = false;

							// start the function that keeps initiating the check for the result areas
							initiateScrollingCheck();

							// reset scores of players
							document.playerScores = [];

							// reset the roundTime again, at the actual start of the round
							document.RoundTime = document.RoundTimeSetting;
							// also reset the startTime of the current Round so we can keep track of how many seconds have passed
							document.RoundStartTime = new Date().getTime();

							// initiate round time keeptracker
							calculateRoundTime();

							//document.round = 0;
							$("#player-results").show();
							$("#animationTime").show();
							$("#TimerBlur").show();
							$("#roundTime").html(document.RoundTime);

							// override screen with play area
							set_guessing_type_message();
							$("#animationTime").show();
							$("#current_song_service").show();
							$("#get_it_link").show();

							document.playerFailed = false;

							DEBUG && console.log("getting ready to call ajax for playlist");
							// get list of songs, choose one at random
							if (playlists[document.selectedPlaylist].id === "666") {
								$.ajax(
									{
										method: "GET",
										url: "https://zxxwemywpv.cyon.link/musicguess-data/php/get_wildcard.php",
										data: {}, dataType: "json", crossDomain: true, "headers": {
											"accept": "application/json",
										}
									})
									.done(function (msg) {
										DEBUG && console.log("ajax for playlist is done");
										library = msg;
										library_copy_for_wrong_answers = library.slice();
										// console.log(library);
										DEBUG && console.log("playing random song for the first time");
                                        document.musicFailed = false;
										play_random_song();
									})
									.fail(function (msg) {
										DEBUG && console.log("ajax for playlist failed");
										if(!document.paused){
										start();
										} else{
											document.musicFailed = true;
										}
									});
							} else {
								$.ajax(
									{ method: "GET", url: "playlists/playlist_" + playlists[document.selectedPlaylist].id + ".json", data: {}, dataType: "json" })
									.done(function (msg) {
										DEBUG && console.log("ajax for playlist is done");
										library = msg;
										library_copy_for_wrong_answers = library.slice();
										// console.log(library);
										DEBUG && console.log("playing random song for the first time");
                                        document.musicFailed = false;
										play_random_song();
									})
									.fail(function (msg) {
										DEBUG && console.log("ajax for playlist failed");
										if(!document.paused){
										start();
										} else{
                                           document.musicFailed = true;
									    }
									}
									);
							}

							var playlist_id = playlists[document.selectedPlaylist].id;
							DEBUG && console.log("trying to send playlist selected event");
							$.ajax(
								{
									method: "POST",
									url: "https://zxxwemywpv.cyon.link/musicguess-data/php/playlist-selected.php",
									data: { devices: air_console.devices, playlist_id: playlist_id, number_of_rounds: document.maxRound }, dataType: "json", crossDomain: true, "headers": {}
								});


							// stores the current solution
							document.solution = [];
						});
					});
				});
			});
		}

		// Array Remove - By John Resig (MIT Licensed)
		Array.prototype.remove = function (from, to) {
			var rest = this.slice((to || from) + 1 || this.length);
			this.length = from < 0 ? this.length + from : from;
			return this.push.apply(this, rest);
		};

		function randomIntFromInterval(min, max) {
			return Math.floor(Math.random() * (max - min + 1) + min);
		}

		/* function update_controllers_about_game_status(){
		message = [];
		if (document.game_in_progress) {
			// let the existing controllers know the game is running
			
			message.push({
				type: "in_progress"
			});
			
		} else {
			// let the existing controllers know the game is not running
			message.push({
				type: "not_in_progress"
			});
		}
		air_console.broadcast(message);
		} */

		function play_random_song() {
			DEBUG && console.log("play random song was called");
			document.round++;
			DEBUG && console.log("increased round counter");
			$("#playlist-info").css("top", "5%");
			$("#roundCounter").show();
			$("#player-results").show();
			$("#roundCounter").html('<span style="color: #ffdc40; font-weight: 600;">Rounds:</span> ' + document.round + "/" + document.maxRound);
			DEBUG && console.log("set round counter display");

			// test if the start function can be invoked in case of library not being loaded successfully from ajax
			// it does, just not very nicely
			/* randonum = randomIntFromInterval(0,1);
			if(randonum === 0){
				console.log("bugging out");
				library = undefined;
			} else {
				console.log("working");
			} */
			DEBUG && console.log("library:");
			DEBUG && console.log(library);
			if (library === undefined) {
				// attempt to start over
				DEBUG && console.log("starting over because library was not returned from ajax");
				start();
				return;
			}

			randomSongIndex = randomIntFromInterval(0, library.length - 1);
			DEBUG && console.log("got id of random song");
			randomSong = library[randomSongIndex];

			// use this to select a specific song
			/* library.forEach((track) => {
				if(track.id === '1054438586'){
					randomSong = track;
				}
			}); */

			DEBUG && console.log("random song:");
			DEBUG && console.log(randomSong);

			DEBUG && console.log("got the random song object");
			// remove song from the library so it will not get played more than once
			library.remove(randomSongIndex);
			DEBUG && console.log("removed the random song from the library");

			// get wrong answers for multiple choice
			wrong_answers = 0;
			wrong_answers_array = [];

			switch (document.guessing_type) {
				case "guessing-both":
					artist_or_title = randomIntFromInterval(0, 1);
					break;
				case "guessing-artist":
					artist_or_title = 0;
					break;
				case "guessing-title":
					artist_or_title = 1;
					break;
			}

			DEBUG && console.log("determined whether to let the user guess artist or title");

			DEBUG && console.log("entering while loop");

			while (wrong_answers < 3) {

				// 50:50 chance that wrong answer is either artist or title

				suitable_wrong_answer = true;
				wrongSongIndex = randomIntFromInterval(0, library_copy_for_wrong_answers.length - 1);

				// console.log("wrong song index " + wrongSongIndex);

				wrongSong = library_copy_for_wrong_answers[wrongSongIndex];
				if (artist_or_title === 0) {
					// artist
					// check if the wrongSong has the same artist as the actual song
					if (wrongSong === undefined || randomSong === undefined) {
						suitable_wrong_answer = false;
					} else if (wrongSong.artist === randomSong.artist) {
						suitable_wrong_answer = false;
					}
					// check if wrong contains right, or vice versa
					if (wrongSong.artist.indexOf(randomSong.artist) !== -1 && randomSong.artist.indexOf(wrongSong.artist)) {
						suitable_wrong_answer = false;
					}
					// check if the selection is already in the array
					if ($.inArray(wrongSong.artist, wrong_answers_array) !== -1) {
						suitable_wrong_answer = false;
					}
					if (suitable_wrong_answer) {
						wrong_answers_array.push(wrongSong.artist);
					}
				} else {
					// title
					// check if the wrongSong has the same title as the actual song
					if (wrongSong.title === randomSong.title) {
						suitable_wrong_answer = false;
					}
					// check if wrong contains right, or vice versa
					if (wrongSong.title.indexOf(randomSong.title) !== -1 && randomSong.title.indexOf(wrongSong.title) !== -1) {
						suitable_wrong_answer = false;
					}
					// check if the selection is already in the array
					if ($.inArray(wrongSong.title, wrong_answers_array) !== -1) {
						suitable_wrong_answer = false;
					}
					if (suitable_wrong_answer) {
						wrong_answers_array.push(wrongSong.title);
					}
				}
				if (suitable_wrong_answer) {
					wrong_answers++;
				}
			}

			// console.log("array of wrong answers" + wrong_answers_array);

			// console.log("playing song " + randomSongIndex + " in library");
			// console.log(randomSong);

			// change song id in player
			$("#player").attr("src", randomSong.preview_url);

			// turn volume back up
			DEBUG && console.log("resetting player volume");
			document.animatingVolume = false;
			player = document.getElementById("player");
			player.volume = 0.4;

			// apparently this is broken?
			// $("#player").prop("volume", 0.4);


			// record start time
			document.startTime = new Date().getTime();
			document.offlinePause = 0;
			document.offlinePauseOffset = 0;

            if(document.paused){
				player.pause();
				document.offlinePause = new Date().getTime();
			}

			// $('#player').get(0).currentTime = 5;
			$("#animationTime").show();
			DEBUG && console.log("triggered the bars animation");


			artist = randomSong.artist;
			title = randomSong.title;
			album = randomSong.album;
			album_art = randomSong.album_art;
			buy_link = randomSong.buy_link;
			id = randomSong.id;
			service = randomSong.service;

			$("#current_song_service").html("<div id='disclaimer'>This song is provided by the Itunes Search API Preview</div><div id='get_it_link'><a href='" + buy_link + "'' target='_blank'><img src='images/itunes.svg' class='itunes' /></a></div>");



			document.solution = [];
			document.solution.push({
				type: "solution",
				artist: artist,
				title: title,
				album: album,
				album_art: album_art,
				wrongAnswers: wrong_answers_array,
				answerType: artist_or_title,
				buy_link: buy_link,
				id: id,
				service: service
			});

			// send the solution to all clients
			air_console.broadcast(document.solution);
		}

		function switch_playlist(type) {
			DEBUG && console.log("switching playlist");
			// console.log("Handling switch of playlist to " + type);
			// console.log("all playlists:");
			// console.log(playlists);

			// $(".album_art.active").addClass("shrink");


			document.getElementById("sound-effect-switch").play();

			if (type === "next") {
				// currently on the last playlist
				if (document.selectedPlaylist === playlists.length - 1) {
					document.selectedPlaylist = 0;
					previous_id = playlists.length - 1;
					next_id = 1;
				} else if (document.selectedPlaylist === playlists.length - 2) {
					DEBUG && console.log("we are on the second last playlist before the switch");
					previous_id = playlists.length - 2;
					document.selectedPlaylist = playlists.length - 1;
					next_id = 0;
				} else {
					previous_id = document.selectedPlaylist;
					document.selectedPlaylist += 1;
					next_id = document.selectedPlaylist + 1;
				}
			} else {
				// previous
				// currently on the first playlist
				if (document.selectedPlaylist === 0) {
					previous_id = playlists.length - 2;
					document.selectedPlaylist = playlists.length - 1;
					next_id = 0;
				} else if (document.selectedPlaylist === 1) {
					next_id = 1;
					document.selectedPlaylist = 0;
					previous_id = playlists.length - 1;
				}
				else {
					next_id = document.selectedPlaylist;
					document.selectedPlaylist -= 1;
					previous_id = document.selectedPlaylist - 1;
				}
			}

			$(".album_art.previous").html(document.playlist_storage[previous_id]);
			$(".album_art.active").html(document.playlist_storage[document.selectedPlaylist]);

			$(".playlist-track-count").html(playlists[document.selectedPlaylist]['amount_of_tracks'] + " Tracks" + '</br>');
			$(".playlist-description").html(playlists[document.selectedPlaylist]['description']);


			$(".album_art.next").html(document.playlist_storage[next_id]);

			if (document.maxRound > playlists[document.selectedPlaylist]['amount_of_tracks']) {
				document.maxRound = playlists[document.selectedPlaylist]['amount_of_tracks'];
			}

			check_if_playlist_needs_hero();

			update_max_rounds_on_controllers();

			// console.log("newly selected playlist" + document.selectedPlaylist);

		}
		function update_selected_rounds_on_controllers() {
			round_change = [];
			round_change.push({ type: "round_change", maxRound: document.maxRound });
			// send round change message to the controllers
			air_console.broadcast(round_change);
		}

		function update_max_rounds_on_controllers() {
			// also send the current playlist max rounds to the controllers, so it knows when not to increase the count locally
			if (typeof playlists !== 'undefined' && document.selectedPlaylist !== undefined) {
				// only attempt this is playlists is already initialized (takes some time because the json needs to be fetched first)
				playlist_rounds = [];
				playlist_rounds.push({ type: "playlist_rounds", playlist_rounds: playlists[document.selectedPlaylist]['amount_of_tracks'] });
				air_console.broadcast(playlist_rounds);
			}
		}

		function sleep(ms) {
			return new Promise(resolve => setTimeout(resolve, ms));
		}

		function check_if_playlist_needs_hero() {
			if (document.screen !== "playlist-selection") {
				return;
			}
			if (playlists[document.selectedPlaylist]['hero'] === "1") {
				DEBUG && console.log("playlist requires hero");
				if (document.hero) {
					DEBUG && console.log("user has hero, show start with hero");
					start_with_hero = [];
					start_with_hero.push({ type: "start_with_hero" });
					air_console.broadcast(start_with_hero);
				} else {
					DEBUG && console.log("user does not hero, disabling start");
					disable_start = [];
					disable_start.push({ type: "disable_start" });
					air_console.broadcast(disable_start);
				}
			} else {
				DEBUG && console.log("playlist does not require hero, enabling start");
				enable_start = [];
				enable_start.push({ type: "enable_start" });
				air_console.broadcast(enable_start);
			}
		}

		function send_score() {
			document.playerScores.forEach(function (score) {
				DEBUG && console.log("sending score to player " + score.player);
				DEBUG && console.log(score);
				score_message = [];
				score_message.push({ type: "score", score: score, maxRound: document.maxRound });
				air_console.message(score.player, score_message);
			});
		}

		function round_end() {
			const winnername = air_console.getNickname(document.playerScores[0].player);
			/* if (document.ad_showing) {
				document.roundEndInitiated = false;
				return;
			} */

			hide_cancel = [];
			hide_cancel.push({ type: "hide_cancel" });
			air_console.broadcast(hide_cancel);

			DEBUG && console.log("round end function was called");
			DEBUG && console.log("attempting to log results for song difficulty");

			let result = {correct: 0, correctTime: 0, incorrect: 0, id: document.solution[0].id, service:  document.solution[0].service};

			document.playerScores.forEach(function (score) {
				// document.solution
				if(score.correct){
					result.correct++;
					result.correctTime += score.currentGuessTime;
				} else {
					result.incorrect++;
				}
			});

			DEBUG && console.log("solution:");
			DEBUG && console.log(document.solution);
			document.roundDifficultyResults.push(result);

			// determine fastest player
			// clone array for sorting differently
			fastestPlayers = document.playerScores.slice();

			fastestPlayers.sort(function (a, b) {
				if (a.currentGuessTime < b.currentGuessTime) {
					if (a.correct) {
						// place a higher than b
						return -1;
					} else if (b.correct) {
						// place b higher than a
						return 1;
					} else {
						// place a higher than b
						return -1;
					}
				}
				if (a.currentGuessTime > b.currentGuessTime) {
					if (b.correct) {
						// place b higher than a
						return 1;
					} else if (a.correct) {
						// place a higher than b
						return -1;
					} else {
						// place b higher than a
						return 1;
					}
				}
				// place and b "equally"
				if (a.correct && b.correct) {
					return 0;
				}
				if (!a.correct && !b.correct) {
					return 0;
				}
				if (a.correct) {
					// place a higher than b
					return -1;
				} else {
					// place b higher than a
					return 1;
				}
			});
			for(let i = 0; i < fastestPlayers.length; i++){
              if(!air_console.getNickname(fastestPlayers[i].player)){
                document.amount_of_finished_players--;
			  }
			}
			userName = air_console.getNickname(fastestPlayers[0].player);
            if (userName && userName.length > 25) {
              userName = userName.substring(0, 25) + "...";
            } else if(!userName){
				calculateRoundTime();
				document.roundEndInitiated = false;
				document.game_in_progress = true;
				document.playerScores[0] = [];
				return;
			}
			if (typeof fastestPlayers !== 'undefined' && typeof fastestPlayers[0] !== 'undefined' && fastestPlayers[0].correct) {
				fastestString = "Fastest player: <span style='color: white;'>" + userName + "</span> with " + fastestPlayers[0].currentGuessTime + " seconds.";
				$("#player_" + userName + "_id_" + fastestPlayers[0].player + "_result").find(".darken_image").css("top", "-139%");
				$("#player_" + userName + "_id_" + fastestPlayers[0].player + "_result").find(".darken_image").css("left", "51%");
				$("#disclaimer").css("color", "#FEA411");
				$("#ring-container").addClass("correct_ring");
			} else if (document.playerFailed) {
				fastestString = "We apologize for the inconvenience.";
			} else {
				fastestString = "Nobody guessed correctly!";
				$("#player_" + userName + "_id_" + fastestPlayers[0].player + "_result").find(".darken_image").css("top", "-139%");
				$("#player_" + userName + "_id_" + fastestPlayers[0].player + "_result").find(".darken_image").css("left", "51%");
				$("#disclaimer").css("color", "#FEA411");
				$("#ring-container").addClass("incorrect_ring");
			}
			// output fastest player to screen
			$("#disclaimer").show();
			$("#disclaimer").html(fastestString);
			$("#get_it_link").hide();
			// console.log(fastestString);

			// stop animations in progress
			// $("#player").stop();

			// reset the roundTime so time cant run out in the time between matches
			document.RoundTime = document.RoundTimeSetting;
			$("#animationTime").hide();
			$("#TimerBlur").hide();

			//$("#current_song_service").hide();

			$("#animationTime").hide();

			if (document.playerFailed) {
				document.playerFailed = false;
				$("#message-blur").show();
				$("#message").html("Skipped a broken song.");
				$("#animationTime").hide();
			} else {
				if (!document.animatingVolume) {
					$("#player").animate({ volume: 0 }, 4000);
					document.animatingVolume = true;
				}
				$("#message-blur").show();
				$("#message").html("Round is over!");
				$("#ring-container").show();
			}

			sleep(4000).then(() => {

				document.amount_of_finished_players = 0;

				// remove correct/wrong classes - we wait for the timer to pass because otherwise the last players result wont get highlighted on the screen
				$("#rounded-container").removeClass("avatar_wrong");
				$("#rounded-container").removeClass("avatar_correct");
				$("#ring-container").removeClass("correct_ring");
				$("#ring-container").removeClass("incorrect_ring");

				if (document.round === document.maxRound) {
					// reset current round to 0 so no part of the game thinks we are still in a game
					document.round = 0;

					// handle end of game
					document.game_in_progress = false;
					document.game_over_screen = true;

					$.ajax(
					{
						method: "POST",
						url: "https://zxxwemywpv.cyon.link/musicguess-data/php/round-difficulty-results.php",
						data: { roundDifficultyResults: document.roundDifficultyResults }, dataType: "json", crossDomain: true, "headers": {}
					});

					// let every player know their score for their after game report
					document.playerScores.forEach(function (score) {
						DEBUG && console.log("sending score to player " + score.player);
						DEBUG && console.log(score);
						score_message = [];
						score_message.push({ type: "score_report", score: score, maxRound: document.maxRound });
						air_console.message(score.player, score_message);
					});

					$("#playlist-info").hide();
					$("#roundCounter").hide();
					$("#roundCounter").html("");

					$("#playlist-display").hide();

					$("#status-wrapper").hide();
					$("#status").html("");
					$("#status").hide();
					const winner_object = document.playerScores[0];
					let message = '';
					if (winner_object !== undefined) {
						const winner_correct = winner_object.correctGuesses;

						const winner_html = $("#results-scrollable .single-result").first();
						$("#victory_screen").append("<span class='game_over'> Game Over! Winner:</span>");
						$("#victory_screen").append(winner_html);
						$("#victory_screen .single-result").append("<div id='game_over-ring' class='image-element'></div>");

						$("#game_over-ring").append($("#victory_screen .position_display"));
						$("#game_over-ring").append($("#victory_screen .darken_image").find("#rounded-container"));
						$("#game_over-ring").find("#rounded-container").css({top: "8%", left: "8%", width: "84%", height: "83%"});
						$("#victory_screen .darken_image").removeAttr("style");
						var winnerpoints = $("#victory_screen .player_score").text();
						$("#victory_screen .player_score ").hide();
						$("#victory_screen .darken_image").hide();
						$("#victory_screen .position_display").hide();

						message += "</div class='credits_text'>";
                        if(winnername != undefined) {
                            message += "<span class='result_category' style='font-size: min(5vh, 2.9vw);top: 46%;left: 11%;'>" + winnername + ": ";
                        }
                        else{
                            message += "<span class='result_category' style='font-size: min(5vh, 2.9vw);top: 46%;left: 11%;'>" + "player " + document.playerScores[0].player + ": ";
                        }
						message += "<span class='result'>" + winnerpoints + " points</span></span></br>";
						message += "<span class='result_category'>Correct guesses:";
						message += "<span class='result'>  " + winner_correct + "/" + document.maxRound + " (" + Math.round(100 / document.maxRound * winner_correct) + "%)</span></span></br>";
						message += "<span class='result_category'>Total time taken for guesses:";
						message += "<span class='result'>  " + Math.round(winner_object.totalGuessTime * 10) / 10 + " seconds</span></span></br>";
						message += "<span class='result_category'>Average time guessing:";
						message += "<span class='result'>  " + + Math.round(winner_object.totalGuessTime / document.maxRound * 10) / 10 + " seconds</span></span></br></div>";

						$("#victory_screen").append(message);

						$("#message").html("");
						$("#message-blur").hide();
						$("#status-wrapper").hide();
						$("#status").hide();

						$("#victory_screen").show();
						$("#victory_screen").animate({ opacity: 1 }, 1500);
						$("#player-results").hide();



						document.getElementById("sound-effect-cheers").play();
					} else {
						message = "Game Over!</br> You have managed to never even guess. Either you're away from the game or you're testing an edge case ;)</br>";
						$("#message-blur").show();
						$("#message").html(message);
					}


					// set roundTime extra high so the end doesnt happen more than once
					document.RoundTime = -10;
					// console.log("game over");

					$("#current_song_service").hide();

					game_end = [];
					game_end.push({ type: "game_end" });
					document.roundEndInitiated = false;
					// send game end message to the controllers
					air_console.broadcast(game_end);
				} else if (!document.cancelled) {
					air_console.showAd();
				}
			});
		}

		function next_round() {
			// stop the volume from going down
			// $("#player").stop();

			document.roundEndInitiated = false;
			// initiate next round
			// reset the number of inactive clients (clients that connect in this time can play the next round)
			document.inactiveClients = 0;
			if(document.paused){
				document.musicFailed = true;
				$("#status").html("countdown paused");
				return;
			}else{
				$("#message-blur").show();
			    $("#message").html("Get ready for the next round!");
				$("#status-wrapper").show();
				$("#ring-container").hide();
				$("#player-results").hide();
				var userName = air_console.getNickname(fastestPlayers[0].player);
                if (userName && userName.length > 25) {
                  userName = userName.substring(0, 25) + "...";
                }
				fastestPlayers[0].correct = false;
				$("#player_" + userName + "_id_" + fastestPlayers[0].player + "_result").find(".darken_image").removeAttr("style");
			    $("#status").css({ display: "flex" });
			    $("#status").html("3");
			    document.getElementById("sound-effect-clock").play();
			}
			sleep(1000).then(() => {
				if(document.paused){
					document.musicFailed = true;
					$("#status").html("countdown paused");
					return;
				}else{
				    document.getElementById("sound-effect-clock").play();
				    $("#status").html("2");
				}
				sleep(1000).then(() => {
					if(document.paused){
					    document.musicFailed = true;
						$("#status").html("countdown paused");
					    return;
				    }else{
					    document.getElementById("sound-effect-clock").play();
					    $("#status").html("1");
					}
					sleep(1000).then(() => {
						$("#current_song_service").show();
						$("#get_it_link").show();
						$("#status").html("");
						$("#status").hide();

						set_guessing_type_message();



						// reset the roundTime again, at the actual start of the round
						document.RoundTime = document.RoundTimeSetting;
						// also reset the startTime of the current Round so we can keep track of how many seconds have passed
						document.RoundStartTime = new Date().getTime();

						/*
						// reset the guessTime and correct/false for every player in case they dont answer
						document.playerScores.forEach(function (element) {
							element.correct = false;
							element.currentGuessTime = 0;
						});
						*/

						// initiate round time keeptracker
						document.roundEndInitiated = false;
						DEBUG && console.log("start keeping track of roundtime");
						calculateRoundTime();

						$("#animationTime").show();
						DEBUG && console.log("calling play random song for next round");
						play_random_song();
					});
				});
			});
		}



		function initiate_guessing_area(player_id) {
			// check if the player already has a guess area
			guessArea = false;
			$("#player_" + air_console.getNickname(player_id) + "_id_" + player_id + "_result").each(function () {
				guessArea = true;
			});
			if (!guessArea) {
				// add empty guessArea
				url = air_console.getProfilePicture(player_id, 120);
				$("#results-scrollable").append('<div class="single-result" id="player_' + air_console.getNickname(player_id) + "_id_" + player_id + '_result"><div class="darken_image image-element"><div class="position_display"></div><div id="rounded-container" class="image-element"><img src="' + url + '"></div><div class="player_score button-text">0</div></div>');
			}
		}

		function initialize_player_score(from, newScore, guessTime, guessTime, correct) {
			if (correct) {
				document.playerScores.push({ player: from, score: newScore, currentGuessTime: guessTime, totalGuessTime: guessTime, correct: correct, correctGuesses: 1 });
			} else {
				document.playerScores.push({ player: from, score: newScore, currentGuessTime: guessTime, totalGuessTime: guessTime, correct: correct, correctGuesses: 0 });
			}
		}

		function handle_guess(message, from) {

			// console.log("Player " + from + " made a guess!");

			// initialize the array that stores the general progress of the players
			if (!document.player) {
				document.player = [];
			}

			// initialize the array for the current device
			if (!document.player[from]) {
				// initialize array if not already present
				document.player[from] = [];
			}

			initiate_guessing_area(from);

			guessTime = (new Date().getTime() - document.startTime - document.offlinePauseOffset);
			negative_points = Math.round(0.01 * guessTime);

			actual_points = 300 - negative_points;
			if (actual_points < 0) actual_points = 0;
			guessTime = guessTime / 1000;

			correct = true;
			if (message[0].type !== "correctGuess") {
				actual_points = 0;
				correct = false;
			}

			newScore = actual_points;

			// try selecting current score
			playerScore = document.playerScores.filter(function (obj) {
				return obj.player === from;
			});

			let correctGuesses = 0;
			let totalGuessTime = 0;
			if (playerScore[0]) {
				newScore = playerScore[0].score + actual_points;
				playerScore[0].score = newScore;
				playerScore[0].currentGuessTime = guessTime;
				playerScore[0].correct = correct;
				playerScore[0].totalGuessTime += guessTime;
				totalGuessTime = playerScore[0].totalGuessTime;
				if (correct) {
					playerScore[0].correctGuesses++;
					correctGuesses = playerScore[0].correctGuesses;
				}
			} else {
				totalGuessTime = guessTime;
				if (correct) {
					correctGuesses = 1;
				}
				initialize_player_score(from, newScore, guessTime, guessTime, correct);
			}

			document.playerScores.sort(function (a, b) {
				if (a.score > b.score) {
					return -1;
				}
				if (a.score < b.score) {
					return 1;
				}
				return 0;
			});

			let position = 0;
			document.playerScores.forEach(function (score, index) {
				if (score.player === from) {
					position = index + 1;
				}
				score.position = index + 1;
			});

			$("#player_" + air_console.getNickname(from) + "_id_" + from + "_result .player_score").html(newScore);

			// send the score to the controller
			document.score = [];
			document.score.push({
				type: "score",
				score: { score: newScore, increase: actual_points, position: position }
			});
			// send the score to the specific client
			air_console.message(from, document.score);

			// console.log(document.playerScores);



			// console.log(document.playerScores);

			url = air_console.getProfilePicture(from, 120);
			resultArea = $("#player_" + air_console.getNickname(from) + "_id_" + from + "_result");
			resultArea.find("img").attr("src", url);

			position = 1;
			document.playerScores.forEach(function (element) {
				$("#player_" + air_console.getNickname(element.player) + "_id_" + element.player + "_result").find(".position_display").html(position);
				if (position === 1) {
					$("#player_" + air_console.getNickname(element.player) + "_id_" + element.player + "_result").prependTo("#results-scrollable");
				} else {
					// insert after previous element
					$("#player_" + air_console.getNickname(element.player) + "_id_" + element.player + "_result").insertAfter("#player_" + air_console.getNickname(previous_element.player) + "_id_" + previous_element.player + "_result");
				}
				previous_element = element;
				position++;
			});

			if (message[0].type === "correctGuess") {
				resultArea.find(".current_score").html(newScore);
				resultArea.find(".score_change").html("+ " + actual_points + " Points");
				resultArea.find(".current_time").html(guessTime + " seconds");
				resultArea.find("#rounded-container").addClass("avatar_correct");
			} else {
				resultArea.find(".score_change").html("No Points");
				resultArea.find(".current_time").html(guessTime + " seconds");
				resultArea.find("#rounded-container").addClass("avatar_wrong");
				actual_points = 0;
			}

			// increase the amount of finished players
			document.amount_of_finished_players++;

			DEBUG && console.log("handle_guess is calling check if all players have guessed");
			check_if_all_players_have_guessed();
			send_score();
		}

		function check_if_all_players_have_guessed() {
			// console.log("Currently Connected: " + air_console.getControllerDeviceIds().length);
			// console.log("Amount of finished players: " + document.amount_of_finished_players);
			// console.log("Amount of inactive clients: " + document.inactiveClients);
			// in theory this should play the next song when all connected devices have finished
			// since a controller can join after the round has started, this is probably a blocker we need to handle
			if (document.amount_of_finished_players === air_console.getControllerDeviceIds().length) {
				DEBUG && console.log("currently connected player amount: " + air_console.getControllerDeviceIds().length);
				DEBUG && console.log("all connected controllers have finished their guess");
				document.roundEndInitiated = true;
				round_end();

			}
			// check if the total is correct when considering inactive players
			else if (air_console.getControllerDeviceIds().length === document.amount_of_finished_players + document.inactiveClients) {
				DEBUG && console.log("all connected controllers have finished their guess, considering inactive controllers");
				document.roundEndInitiated = true;
				round_end();
			}
		}


	</script>

</head>

<body onload="init()">
	<div id="ticker-wrapper">
		<div class="ticker" id="ticker1">Follow @MusicGuess1 on Twitter to get updates and give feedback about the
		   game!</div>
		<div class="ticker" id="ticker2">There is 1 new playlist, Today's Top 50!</div>
	</div>
	<div class="screen">
		<div class="screen-debug"></div>
	    <div id="screen-wrapper">
			<div class="instruction logo">
				<span id="game_logo">MusicGuess</span>
				<div id="message-blur" class="image-element">
				  <span id="message" class="image-element text-allign"></span>
			    </div>
				<div id="ring-container" class="image-element"></div>
			</div>
			<div id="status-wrapper" class="image-element text-allign">
				<span id="status" class="button-text"></span>
			</div>
			<div id="current_song_service" class="image-element"></div>
			<div id="victory_screen" class="image-element text-allign"></div>
		</div>
		<div id="playlist-selector">
			<div id="title-playlist" class="image-element text-allign">
				<span class="button-text">Select your playlist!</span>
			</div>
		</div>
		<div id="playlist-info" class="image-element text-allign">
			<div id="playlist-display" class="button-text"></div>
			<div id="roundCounter" class="button-text"></div>
		</div>
		<div id="animationTime">
			<img id="playanimation" src="audio.svg" class="image-element" style="left: -9%;"/>
			<div id="roundTime" class="image-element"></div>
			<img id="playanimation" src="audio.svg" class="image-element" style="left: 54.5%;"/>
		</div>
		<div id="credits-container">
			<div id="credits" class="image-element text-allign">
				<span class="category button-text">Developed by:</span>
				<span class="content button-text">Christian Nyffenegger, freakpants</a></span></br>
				<span class="category button-text">Background video by:</span>
				<span class="content button-text">Tomislav Jakupec / Pixabay</span></br>
				<span class="category button-text">Music provided by:</span>
				<span class="content button-text">Itunes Search API Preview</span></br>
				<span class="category button-text">Sound effects by:</span>
				<span class="content button-text">Zapsplat</span></br>
				<span class="category button-text">SVG Loaders by:</span>
				<span class="content button-text">Sam Herbert (Github)</span></br>
			</div>
		</div>
		<div id="updates-container">
			<div id="updates" class="image-element text-allign">
				    <span id="updates-text" class="button-text"></br>16.06.2023 - Complete overhaul of the screen and controller visuals. Inclusion of several country playlists. Several adjustments on general usability and bug fixes. Optimized the artwork system to improve the iteration time of the release of updates and fixes.</span>
					<span id="updates-text" class="button-text"></br>18.05.2022 - Reworked UX to be more intuitive and visually distinct.</span>
					<span id="updates-text" class="button-text"></br>04.01.2022 - The game is now playable for free. Accordingly, some playlists are now exclusive with
						AirConsole Hero.
						There is a new menu system, with improved selection of round amount. Released 3 new playlists:
						Ballads, Latin, Spain's Most Wanted Dec 2021. Added 10 new songs to Global Hits 2021.
					</span>
					<span id="updates-text" class="button-text"></br>20.12.2021 - Released a new christmas playlist</span>
					<span id="updates-text" class="button-text"></br>16.12.2021 - Fixed an Issue with wildcard playlist not working.</span>
					<span id="updates-text" class="button-text"></br>15.12.2021 - Released new wildcard playlist. This dynamically selects from over 30'000 songs, but
						with a lot of cover/live versions of songs or just plain unknown or weird songs.</span>
			</div>
		</div>
		<div id="splash-screen">
			<div id="splash-text">
				Welcome to MusicGuess! MusicGuess is a living game that is constantly being updated with new content and
				features.
				To see the latest update, select Updates in the menu. If you want to give feedback/report issues you can
				follow the official Twitter account
				@MusicGuess1 </br>
				I would also love to see pictures of your parties (especially those really big ones with over 10 players and
				more!).
				</br></br>
				Enjoy the game and have fun!</br>
				@freakpants
			</div>
		</div>
		<div id="spotify-container">
			<div id="spotify">
				<span>You need to be on a computer to connect Spotify.
					The Spotify account will be connected to the AirConsole user on the current Master Controller.
					Currently, this user is <span id="master-user"></span></br>
					Press Confirm/Start to open a new window to attempt to connect your Spotify Account.
				</span>
			</div>
		</div>
		<div id="main-menu">
			<ul>
				<li id="new-game-button" class="active image-element text-allign">
                    <div class="button-text">New Game</div>
                </li>
                <li id="credits-button" class="image-element text-allign">
                    <div class="button-text">Credits</div>
                </li>
                <li id="updates-button" class="image-element text-allign">
                    <div class="button-text">Updates</div>
                </li>
                <li id="connect-spotify-button">
                    Connect with Spotify
                </li>
			</ul>
		</div>
		<div id="default-options">
			<div id= "title-options" class="image-element text-allign">
				<span id="titleText-options" class="button-text" style="width: 86%;">Do you want to play the game with the default options? (15 rounds)</span>
			</div>
			<ul>
				<li id="default-yes" class="active image-element text-allign">
					<div class="button-text">Yes</div>
				</li>
				<li id="default-no" class="image-element text-allign">
					<div class="button-text">No</div>
				</li>
			</ul>
		</div>
		<div id="specific-options">
			<div id= "title-options" class="image-element text-allign title-text">
				<span id="titleSpec-options" class="button-text"></span>
			</div>
			<ul id="option-selector">
				<li id="round_amount_option" class="active image-element text-allign">
					<div class="button-text">Number of Rounds to play</div>
				</li>
				<li id="guessing_type" class="guessType image-element text-allign">
					<div class="button-text">Randomly guess either</br> artist or title each round</div>
				</li>
				<li id="specific-start" class="image-element text-allign">
					<div class="button-text">Start</div>
				</li>
			</ul>
			<ul id="round-amount-selector">
				<li class="image-element text-allign" style="top: 40%;left: 35%;">
					<div class="button-text">1</div>
				</li>
				<li class="image-element text-allign" style="top: 40%;left: 43%;">
					<div class="button-text">10</div>
				</li>
				<li class="image-element text-allign" style="top: 40%;left: 51%;">
					<div class="button-text">15</div>
				</li>
				<li class="image-element text-allign" style="top: 40%;left: 59%;">
					<div class="button-text">20</div>
				</li>
				<li class="image-element text-allign" style="top: 54%;left: 35%;">
					<div class="button-text">25</div>
				</li>
				<li class="image-element text-allign" style="top: 54%;left: 43%;">
					<div class="button-text">30</div>
				</li>
				<li class="image-element text-allign" style="top: 54%;left: 51%;">
					<div class="button-text">40</div>
				</li>
				<li class="image-element text-allign" style="top: 54%;left: 59%;">
					<div class="button-text">50</div>
				</li>
				<li class="image-element text-allign" style="top: 68%;left: 35%;">
					<div class="button-text">100</div>
				</li>
				<li class="image-element text-allign custom-amount">
					<div class="button-text">Custom Amount</div>
				</li>
			</ul>
			<ul id="guessing-type-selector">
				<li id="guessing-artist" class="guessing-option active image-element text-allign">
					<div class="button-text">Always guess the artist</div>
				</li>
				<li id="guessing-title" class="guessing-option image-element text-allign">
					<div class="button-text">Always guess the title</div>
				</li>
				<li id="guessing-both" class="guessing-option guessType image-element text-allign">
					<div class="button-text">Randomly guess either </br> artist or title each round</div>
				</li>
			</ul>
		</div>
		<div id="player-results">
			<div id="results-scrollable"></div>
		</div>
		<audio id="sound-effect-switch">
			<source src="sounds/switch.mp3" type="audio/mpeg">
		</audio>
		<audio id="sound-effect-clock">
			<source src="sounds/clock.mp3" type="audio/mpeg">
		</audio>
		<audio id="sound-effect-correct">
			<source src="sounds/correct.mp3" type="audio/mpeg">
		</audio>
		<audio id="sound-effect-wrong">
			<source src="sounds/error.mp3" type="audio/mpeg">
		</audio>
		<audio id="sound-effect-cheers">
			<source src="sounds/cheers.mp3" type="audio/mpeg">
		</audio>
		<audio id="sound-effect-click">
			<source src="sounds/click.mp3" type="audio/mpeg">
		</audio>
		<audio id="sound-effect-start">
			<source src="sounds/start.mp3" type="audio/mpeg">
		</audio>
	
		<audio id="player" autoplay>
			<source src="" type="audio/mpeg">
		</audio>
   </div>
</body>